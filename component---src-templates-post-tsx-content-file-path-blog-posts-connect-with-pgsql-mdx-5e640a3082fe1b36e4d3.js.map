{"version":3,"file":"component---src-templates-post-tsx-content-file-path-blog-posts-connect-with-pgsql-mdx-5e640a3082fe1b36e4d3.js","mappings":"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","sources":["webpack://homepage/./blog/posts/connect-with-pgsql.mdx","webpack://homepage/./src/templates/post.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    span: \"span\",\n    h2: \"h2\",\n    a: \"a\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    h3: \"h3\",\n    strong: \"strong\",\n    ol: \"ol\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"假设，您身边有两台电脑，一台打算用来做 PostgreSQL 数据库服务器，一台用来做客户端。服务器上的 PostgreSQL 14 安装在 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">C:\\\\Program Files\\\\PostgreSQL\\\\14</code>\"\n    }\n  }), \" 目录下，数据库文件保存在 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">C:\\\\Program Files\\\\PostgreSQL\\\\14\\\\data</code>\"\n    }\n  }), \" 目录，欲访问的数据库名为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">db_name</code>\"\n    }\n  }), \"，访问数据库的用户为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">db_user</code>\"\n    }\n  }), \"。\"), \"\\n\", React.createElement(_components.h2, null, \"配置 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">postgresql.conf</code>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, \"编辑数据库配置文件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">C:\\\\Program Files\\\\PostgreSQL\\\\14\\\\data\\\\postgresql.conf</code>\"\n    }\n  }), \"，设置监听的远程连接地址。将 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">listen_addresses</code>\"\n    }\n  }), \" 项的值设置为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">*</code>\"\n    }\n  }), \"，如下所示：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"conf\\\"><pre class=\\\"language-conf\\\"><code class=\\\"language-conf\\\"># - Connection Settings -\\n\\nlisten_addresses = &#39;*&#39;  # what IP address(es) to listen on</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"配置 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">pg_hba.conf</code>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, \"编辑数据库客户端认证配置文件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">C:\\\\Program Files\\\\PostgreSQL\\\\14\\\\data\\\\pg_hba.conf</code>\"\n    }\n  }), \"，设置允许连接到数据库的客户端 IP 地址。\"), \"\\n\", React.createElement(_components.p, null, \"该文件的注释处已经给出了各种配置的详细说明。这里，我们将重点放在对允许的远程连接地址的配置上。\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">pg_hba.conf</code>\"\n    }\n  }), \" 对 ADDRESS 地址的解析基于 \", React.createElement(_components.a, {\n    href: \"https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing\"\n  }, \"CIDR 无类别域间路由\"), \"。\"), \"\\n\", React.createElement(_components.p, null, \"那么，对于 IPv4 地址，有如下五种典型情况：\"), \"\\n\", React.createElement(_components.table, null, React.createElement(_components.thead, null, React.createElement(_components.tr, null, React.createElement(_components.th, null, \"ADDRESS\"), React.createElement(_components.th, null, \"说明\"))), React.createElement(_components.tbody, null, React.createElement(_components.tr, null, React.createElement(_components.td, null, \"210.41.111.111/32\"), React.createElement(_components.td, null, \"仅允许 IP 地址为 210.41.111.111 的远程连接请求\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, \"210.41.111.0/24\"), React.createElement(_components.td, null, \"允许 IP 地址为 210.41.111.* 的远程连接请求\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, \"210.41.0.0/16\"), React.createElement(_components.td, null, \"允许 IP 地址为 210.41.*.* 的远程连接请求\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, \"210.0.0.0/8\"), React.createElement(_components.td, null, \"允许 IP 地址为 210.*.*.* 的远程连接请求\")), React.createElement(_components.tr, null, React.createElement(_components.td, null, \"0.0.0.0/0\"), React.createElement(_components.td, null, \"允许所有 IP 地址的远程连接请求\")))), \"\\n\", React.createElement(_components.p, null, \"那么，如果我们的客户端的 IP 地址为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">210.41.112.112</code>\"\n    }\n  }), \"，可以添加条目如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"conf\\\"><pre class=\\\"language-conf\\\"><code class=\\\"language-conf\\\"># TYPE  DATABASE        USER            ADDRESS                 METHOD\\nhost    db_name         db_user         210.41.112.112/32       scram-sha-256\\n# host    db_name         db_user         210.41.112.0/24         scram-sha-256\\n# host    db_name         db_user         210.41.0.0/16           scram-sha-256\\n# host    db_name         db_user         210.0.0.0/8             scram-sha-256\\n# host    db_name         db_user         0.0.0.0/0               scram-sha-256</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"更小的范围，意味着更高的安全性。\"), \"\\n\", React.createElement(_components.h2, null, \"重启数据库服务\"), \"\\n\", React.createElement(_components.p, null, \"为了让配置生效，我们需要重启启动 PostgreSQL 数据库。\"), \"\\n\", React.createElement(_components.p, null, \"在 Windows 端，PostgreSQL 作为一个服务运行。按 Windows 键，搜索 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">service</code>\"\n    }\n  }), \"，进入服务应用，找到 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">postgresql-x64-*</code>\"\n    }\n  }), \" 服务，右键重新启动即可。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/f61b9606a191670104b47319a7e27772/d2c2a/restart-pgsql.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 73.07692307692307%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABJ0AAASdAHeZh94AAAC1klEQVR42o2U76/aVBjH+X/VxOluFqNzyd4u8a0vfasxcToTjTPZchGHK4wyKLT0Ny0/Wi4tUKBQCnw8LbleY+L0Sb55en59zvOc55xWwk8eE753RfD+A8IPHgh/xfzDT1l8/DnxvYdE9z57tz4Sc+4/Ir56RCTWVEzbZWB72EMDw3HpqTbLRcx0Nme5WbHfZ+x2+3dqvxc+3ZVzKx1FwRDQXxsaXz19yTe/NPj5D51ntT7PJZ3XPZeG6peSVA+p7128UNkn2q8Vl+ZggqSYVE6nE5vNRkCH9HUbzRoSxmtWac5qmzEObtiI3XdZTn6i1PFc+HPpk03KaBKwTvc4wyEVhO1F2G1rRrencjzm3FqxyHCGWJrCbDqC04HjYX9RnnFZm9KVGyhyE2Og3QJTFD+ho1nl960JHpLm8aLRpyrrvBSqtQe0VAc7WBLtTphhwo/XTZ7XOyiqfgGmaUownZLnOVmWsRc6HA5i5Mx37RlfVOd8KSU8qS545ayRrZCuv8K6ScX4nIfPLB7/5FDrWBfgbrfDMAyCICBJEuJ4wWa9LlPWxdl6tk6yjMizHadjxswXmWwXZRbpNuGNVKfbfoPa791FWEDP5zN/twKoOT6qqqJqOo5j8cqM+L415sUg4ofeksEo4q0s87ar0GrJd8Ai1X9aAfSmM8JgyngyEYUZUzNivm2Oedr0+VqeY0yX2KbBQNcxTfO/gNA3HBFhD0NMTpI1J1HpiWexmgdF2UTfEkmSkFut/wM8l69IU/uYllUWbivuZLvT5SaKyfIjq9WKZrOBLNIujqYEbrfbfwW644DRyGc8nuD7PsulSNG2uZnPyye3FsXzPI8wDMUZO3dVLqCFL8DF9TmU1+eALKK5vr6mVvud36pVOp0OrutiiYjjOGYuwEWqxSYlsNjVdYco4k3X63U0TRNtp9w1iiIisWA2m/2loq8AFSrHi7b4mSwWi3Lun18dSMSRK1hoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"重启 PostgreSQL 数据库\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/f61b9606a191670104b47319a7e27772/39c09/restart-pgsql.png\\\"\\n        srcset=\\\"/static/f61b9606a191670104b47319a7e27772/680fe/restart-pgsql.png 156w,\\n/static/f61b9606a191670104b47319a7e27772/17474/restart-pgsql.png 312w,\\n/static/f61b9606a191670104b47319a7e27772/39c09/restart-pgsql.png 624w,\\n/static/f61b9606a191670104b47319a7e27772/d2c2a/restart-pgsql.png 929w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"连接到数据库\"), \"\\n\", React.createElement(_components.h3, null, \"同一路由器下\"), \"\\n\", React.createElement(_components.p, null, \"配置 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">pg_hba.conf</code>\"\n    }\n  }), \"，允许相同路由器下其它主机的连接请求。例如，允许 IP 地址为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">192.168.0.0</code>\"\n    }\n  }), \" 至 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">192.168.255.255</code>\"\n    }\n  }), \" 的连接请求：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"conf\\\"><pre class=\\\"language-conf\\\"><code class=\\\"language-conf\\\"># TYPE  DATABASE        USER            ADDRESS                 METHOD\\nhost    db_name         db_user         192.168.0.0/16          scram-sha-256</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"重新启动数据库服务。\"), \"\\n\", React.createElement(_components.p, null, \"假设服务器的内网 IP 地址为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">192.168.1.104</code>\"\n    }\n  }), \"，数据库监听端口为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">5432</code>\"\n    }\n  }), \"。那么，当我们通过客户端连接远程数据库时，主机名应填写 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">192.168.1.104</code>\"\n    }\n  }), \"，端口应填写 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">5432</code>\"\n    }\n  }), \"，这样，我们就能顺利访问到服务器上的数据库了。\"), \"\\n\", React.createElement(_components.h3, null, \"远程连接\"), \"\\n\", React.createElement(_components.p, null, \"假如您的用作客户端和服务器的电脑分隔两地，现在想要远程连接服务器上的数据库，该怎么办呢？下面是我常用的办法。\"), \"\\n\", React.createElement(_components.p, null, \"首先，需要获取服务器的公网 IP 地址，可以在\", React.createElement(_components.a, {\n    href: \"https://www.ip138.com/\"\n  }, \"这里\"), \"查询。这里假设服务器通过路由器与公网连接。\"), \"\\n\", React.createElement(_components.p, null, \"接着，配置路由器的\", React.createElement(_components.strong, null, \"虚拟服务器\"), \"。可以通过如下步骤实现：\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"将服务器的内网 IP 地址与它的硬件 MAC 地址绑定。别忘了在服务器的网络属性处，关闭随机硬件地址功能。\"), \"\\n\", React.createElement(_components.li, null, \"配置虚拟服务器，映射路由器的外部端口为服务器的数据库端口。\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"最后，修改 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">pg_hba.conf</code>\"\n    }\n  }), \"，根据客户端的公网 IP 地址进行配置。如果客户端的网络环境经常变化，尽管不安全，但也可以考虑设置允许所有 IP 地址进行连接。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"conf\\\"><pre class=\\\"language-conf\\\"><code class=\\\"language-conf\\\"># TYPE  DATABASE        USER            ADDRESS                 METHOD\\nhost    db_name         db_user         0.0.0.0/0               scram-sha-256\\nhost    db_name         db_user         ::/0                    scram-sha-256</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"重新启动数据库服务。\"), \"\\n\", React.createElement(_components.p, null, \"例如，路由器的公网 IP 地址为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">210.41.111.111</code>\"\n    }\n  }), \"，服务器的内网 IP 地址为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">192.168.1.104</code>\"\n    }\n  }), \"，虚拟服务器外部端口为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">22212</code>\"\n    }\n  }), \"，数据库监听端口为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">5432</code>\"\n    }\n  }), \"。那么，当我们通过客户端连接远程数据库时，主机名应填写 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">210.41.111.111</code>\"\n    }\n  }), \"，端口应填写 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">22212</code>\"\n    }\n  }), \"，这样，我们就能顺利访问到服务器上的数据库了。\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/homepage/homepage/blog/posts/connect-with-pgsql.mdx\";\nimport {Fancybox} from \"@fancyapps/ui\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport dayjs from \"dayjs\";\nimport {Link} from \"gatsby\";\nimport * as React from \"react\";\nimport Card from \"../components/card\";\nimport Category from \"../components/category\";\nimport SEO from \"../components/seo\";\nimport Tag from \"../components/tag\";\nconst FancyBoxImage = props => {\n  const {alt = \"The author is too lazy to give an alt\", src, ...restProps} = props;\n  return React.createElement(\"a\", {\n    href: src,\n    \"data-fancybox\": \"gallery\",\n    \"data-caption\": alt\n  }, React.createElement(\"img\", Object.assign({\n    src: src,\n    alt: alt\n  }, restProps)));\n};\nconst ALink = _ref => {\n  let {href = \"\", children} = _ref;\n  const isExternalHref = !(href !== null && href !== void 0 && href.startsWith(\"#\"));\n  const parsedHref = isExternalHref ? href : `#${encodeURIComponent(href.slice(1))}`;\n  return React.createElement(\"a\", {\n    href: parsedHref,\n    target: isExternalHref ? \"_blank\" : undefined,\n    rel: \"noreferrer\"\n  }, children);\n};\nconst components = {\n  a: ALink,\n  img: FancyBoxImage,\n  Card,\n  Link\n};\nconst PostTemplate = _ref2 => {\n  let {children, data} = _ref2;\n  const {mdx: {frontmatter: {title, date: dateString, updated: updatedDateString, categories, tags, timeliness = true}}} = data;\n  const articleRef = React.useRef(null);\n  const date = dayjs(dateString);\n  const updatedDate = updatedDateString ? dayjs(updatedDateString) : date;\n  const today = dayjs();\n  const diffDays = today.diff(updatedDate, \"days\");\n  React.useEffect(() => {\n    var _articleRef$current;\n    const optimizedImageLinks = (_articleRef$current = articleRef.current) === null || _articleRef$current === void 0 ? void 0 : _articleRef$current.querySelectorAll(\"a.gatsby-resp-image-link\");\n    optimizedImageLinks === null || optimizedImageLinks === void 0 ? void 0 : optimizedImageLinks.forEach(link => {\n      const image = link.children.item(1);\n      link.setAttribute(\"data-fancybox\", \"gallery\");\n      link.setAttribute(\"data-caption\", image.alt);\n    });\n    Fancybox.bind(\"[data-fancybox]\");\n    return () => Fancybox.unbind(\"[data-fancybox]\");\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"mx-auto flex max-w-xl flex-col gap-y-12\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col gap-4\"\n  }, (categories === null || categories === void 0 ? void 0 : categories.length) && React.createElement(Category, {\n    name: categories[0],\n    className: \"item-selectable\"\n  }), React.createElement(\"h1\", {\n    className: \"text-3xl font-bold\"\n  }, title), React.createElement(\"div\", {\n    className: \"item-secondary flex flex-col gap-2 lg:flex-row\"\n  }, dateString && React.createElement(\"span\", {\n    title: `首次发布于：${date.toString()}\\n最后更新于：${updatedDate.toString()}`\n  }, date.format(\"MM 月 DD 日 YYYY 年\")), (tags === null || tags === void 0 ? void 0 : tags.length) && React.createElement(\"div\", {\n    className: \"flex flex-1 flex-wrap gap-2 lg:before:content-['\\u2022']\"\n  }, tags.map(tag => React.createElement(Tag, {\n    key: tag,\n    name: tag,\n    className: \"item-secondary item-selectable\"\n  }))))), React.createElement(\"article\", {\n    ref: articleRef,\n    className: \"heti post-entry\"\n  }, timeliness && diffDays > 365 && React.createElement(\"blockquote\", {\n    className: \"border-l-4 border-orange-400\"\n  }, \"\\u8FD9\\u662F\\u4E00\\u7BC7\", React.createElement(\"strong\", null, \"\\u6700\\u540E\\u66F4\\u65B0\\u4E8E \", diffDays, \" \\u5929\\u524D\"), \"\\u7684\\u535A\\u5BA2\\uFF0C\\u5185\\u5BB9\\u53EF\\u80FD\\u968F\\u7740\\u65F6\\u95F4\\u7684\\u63A8\\u79FB\\u800C\\u53D8\\u5F97\\u4E0D\\u518D\\u9002\\u7528\\uFF0C\\u5EFA\\u8BAE\\u60A8\\u4ED4\\u7EC6\\u8BC4\\u4F30\\u4FE1\\u606F\\u7684\\u6709\\u6548\\u6027\\u3002\"), React.createElement(MDXProvider, {\n    components: components\n  }, children)));\n};\nconst query = \"2697480803\";\nexport const Head = _ref3 => {\n  let {data} = _ref3;\n  return React.createElement(SEO, {\n    title: String(data.mdx.frontmatter.title)\n  });\n};\nPostTemplate\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","span","h2","a","table","thead","tr","th","tbody","td","h3","strong","ol","li","_provideComponents","components","React","dangerouslySetInnerHTML","__html","href","wrapper","MDXLayout","_ref","children","isExternalHref","startsWith","parsedHref","encodeURIComponent","slice","target","undefined","rel","img","alt","src","restProps","Card","Link","PostTemplate","_ref2","data","mdx","frontmatter","title","date","dateString","updated","updatedDateString","categories","tags","timeliness","articleRef","dayjs","updatedDate","diffDays","diff","_articleRef$current","optimizedImageLinks","current","querySelectorAll","forEach","link","image","item","setAttribute","Fancybox","bind","unbind","className","length","Category","name","toString","format","map","tag","Tag","key","ref","MDXProvider","Head","_ref3","SEO","String","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}