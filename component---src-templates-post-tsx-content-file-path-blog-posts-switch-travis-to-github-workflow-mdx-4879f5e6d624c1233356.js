"use strict";(self.webpackChunkhomepage=self.webpackChunkhomepage||[]).push([[2711],{5125:function(n,a,e){e.r(a),e.d(a,{Head:function(){return h},default:function(){return b}});var s=e(8453),t=e(6540);function l(n){const a=Object.assign({p:"p",h2:"h2",span:"span",a:"a"},(0,s.R)(),n.components);return t.createElement(t.Fragment,null,t.createElement(a.p,null,"æˆ‘çœŸå‚»ï¼ŒçœŸçš„ï¼Œå•å•å—æ–‡æ¡£çš„æ¨èå°±é€‰æ‹©äº† Travis ä½œä¸ºéƒ¨åˆ†é¡¹ç›®çš„æŒç»­é›†æˆå·¥å…·ï¼Œæ²¡æœ‰æ–™åˆ°å®ƒæ—©å·²äº 2020 å¹´ 12 æœˆæ›´æ¢äº†å…è´¹æ”¿ç­–ï¼Œä¸å†ä¸ºå¼€æºé¡¹ç›®æä¾›å…è´¹çš„ç”¨äºæŒç»­é›†æˆä½¿ç”¨çš„ Credits äº†ã€‚å½“èµ é€çš„ 10000 ä¸ªç‚¹æ•°ç”¨å®Œï¼Œå°±éœ€è¦ä»˜è´¹æ‰èƒ½è¿›è¡Œæ„å»ºäº†ã€‚"),"\n",t.createElement(a.p,null,"å½“ç„¶ï¼Œä½œä¸ºç»æµé©±åŠ¨çš„å…¬å¸ï¼Œè¿‘äº›å¤©æ¥åˆå— Github Actions ç­‰å…¶å®ƒæŒç»­é›†æˆå·¥å…·æ‰“å‹äº†ç›ˆåˆ©ç©ºé—´ï¼ŒæŠ›å¼ƒå¼€æºç”¨æˆ·é€‰æ‹©è½¬å‹åšèµ·äº†å•†äººäº‹ä¸šä¹Ÿå¹¶éä¸å¯ç†è§£ã€‚æ„Ÿè°¢å®ƒæ›¾ä¸ºå¼€å‘è€…æä¾›çš„ä¾¿åˆ©ï¼Œä¸è¿‡ä½œä¸ºä¸€ä¸ªä½›ç³»å¼€å‘è€…ï¼Œç»ˆäºè¿˜æ˜¯éœ€è¦è½¬æŠ•åˆ°åˆ«çš„å…è´¹å·¥å…·ä¸Šå»äº†â€”â€”Gihub Actionsã€‚"),"\n",t.createElement(a.h2,null,"ç¼–å†™æ–°çš„ workflow.yml"),"\n",t.createElement(a.p,null,"é‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬å°±éœ€è¦å°†ä¸º Travis ç¼–å†™çš„å‘½åä¸º ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.travis.yml</code>'}})," çš„é…ç½®æ–‡ä»¶ï¼Œç¿»è¯‘æˆ Github Actions èƒ½è¯†åˆ«çš„ workflow.yml é…ç½®æ–‡ä»¶ã€‚"),"\n",t.createElement(a.p,null,"ä»¥",t.createElement(a.a,{href:"https://github.com/LolipopJ/design-patterns-for-humans-zh"},"çŒ®ç»™ä¸­æ–‡è¯»è€…çš„è®¾è®¡æ¨¡å¼æ•™ç¨‹"),"è¿™ä¸ªé¡¹ç›®ä¸ºä¾‹ï¼ŒåŸæœ‰çš„ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.travis.yml</code>'}})," å†…å®¹å¦‚ä¸‹ï¼š"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">language</span><span class="token punctuation">:</span> node_js\n<span class="token key atrule">node_js</span><span class="token punctuation">:</span>\n  <span class="token punctuation">-</span> lts/*\n<span class="token key atrule">branches</span><span class="token punctuation">:</span>\n  <span class="token key atrule">only</span><span class="token punctuation">:</span>\n    <span class="token punctuation">-</span> main\n<span class="token key atrule">install</span><span class="token punctuation">:</span>\n  <span class="token punctuation">-</span> cd vuepress\n  <span class="token punctuation">-</span> yarn install\n<span class="token key atrule">script</span><span class="token punctuation">:</span>\n  <span class="token punctuation">-</span> yarn build\n<span class="token key atrule">deploy</span><span class="token punctuation">:</span>\n  <span class="token key atrule">provider</span><span class="token punctuation">:</span> pages\n  <span class="token key atrule">skip_cleanup</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n  <span class="token key atrule">local_dir</span><span class="token punctuation">:</span> vuepress/docs/.vuepress/dist\n  <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $CI_DEPLOY_TOKEN\n  <span class="token key atrule">keep_history</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n  <span class="token key atrule">on</span><span class="token punctuation">:</span>\n    <span class="token key atrule">branch</span><span class="token punctuation">:</span> main</code></pre></div>'}}),"\n",t.createElement(a.p,null,"å½“æ£€æµ‹åˆ° main åˆ†æ”¯ä»£ç æ›´æ–°åï¼Œå¯åŠ¨æŒç»­é›†æˆå·¥å…·ã€‚å…‹éš†é¡¹ç›®ï¼Œè¿›å…¥åˆ°é¡¹ç›®çš„ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">vuepress</code>'}})," ç›®å½•ä¸‹æ‰§è¡Œå®‰è£…ä¾èµ–å’Œç”Ÿæˆé™æ€æ–‡ä»¶æ“ä½œï¼Œæœ€åå°† ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/vuepress/docs/.vuepress/dist</code>'}})," ç›®å½•ä¸‹çš„é™æ€æ–‡ä»¶ï¼Œä¸Šä¼ åˆ° ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">gh-pages</code>'}})," åˆ†æ”¯ï¼Œäº¤ç»™ Github éƒ¨ç½²ã€‚"),"\n",t.createElement(a.p,null,"ä½¿ç”¨ Github Actions å®ç°ä¸Šé¢çš„è¿‡ç¨‹ï¼Œé¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.github/workflows</code>'}})," æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹å†…åˆ›å»º workflow é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">deploy.yml</code>'}}),"ï¼Œç¼–å†™å†…å®¹å¦‚ä¸‹ï¼š"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Vuepress Deployment\n\n<span class="token key atrule">on</span><span class="token punctuation">:</span>\n  <span class="token key atrule">push</span><span class="token punctuation">:</span>\n    <span class="token key atrule">branches</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> main\n\n<span class="token key atrule">jobs</span><span class="token punctuation">:</span>\n  <span class="token key atrule">pages</span><span class="token punctuation">:</span>\n    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest\n    <span class="token key atrule">steps</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Use Node.js 14.x\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">"14.x"</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache NPM dependencies\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v2\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">path</span><span class="token punctuation">:</span> node_modules\n          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> runner.OS <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>npm<span class="token punctuation">-</span>cache\n          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">\n            ${{ runner.OS }}-npm-cache</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Dependencies\n        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">\n          cd vuepress\n          npm install</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build\n        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">\n          cd vuepress\n          npm run build</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>\n          <span class="token key atrule">deploy_key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>\n          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> vuepress/docs/.vuepress/dist\n          <span class="token key atrule">publish_branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages</code></pre></div>'}}),"\n",t.createElement(a.h2,null,"åˆ›å»º SSH Deploy Key"),"\n",t.createElement(a.p,null,"è¿™ä¸€æ­¥æ˜¯ä¸ºäº†ç»™ Github Actions è¿œç¨‹æœåŠ¡å™¨è®¿é—®æˆ‘çš„ Github è´¦å·æä¾›å‡­è¯ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® Github è´¦æˆ·åŒé‡éªŒè¯æˆ–å…¶å®ƒå®‰å…¨éªŒè¯ï¼Œå¯ä»¥ç§»é™¤ä¸Šé¢è„šæœ¬ä¸­çš„ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">deploy_key</code>'}})," å±æ€§ç„¶åè·³è¿‡è¿™ä¸€æ­¥ã€‚ä½†æ˜¯å‡å¦‚ä»¥åè®¾ç½®äº†å®‰å…¨éªŒè¯ï¼Œå›æ¥æ”¹åˆä¼šå¾ˆéº»çƒ¦ï¼Œä¸å¦‚ä¸€æ­¥åˆ°ä½äº†å§ ğŸ¤—ã€‚"),"\n",t.createElement(a.p,null,"æ‚¨ä¹Ÿå¯ä»¥ç”Ÿæˆ Personal access token ä½œä¸ºæ›¿ä»£ï¼Œä¸è¿‡å‰é¢çš„è„šæœ¬ä¸­çš„ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">deploy_key</code>'}})," åº”è¯¥ä¿®æ”¹ä¸º ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">personal_token</code>'}}),"ã€‚"),"\n",t.createElement(a.p,null,"å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·ï¼Œåˆ›å»º SSH éƒ¨ç½²å¯†é’¥ï¼š"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># è¿›å…¥åˆ°å½“å‰ç”¨æˆ·çš„ .ssh ç›®å½•ä¸‹</span>\n<span class="token builtin class-name">cd</span> ~/.ssh\n<span class="token comment"># åˆ›å»º SSH å¯†é’¥</span>\nssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-b</span> <span class="token number">4096</span> <span class="token parameter variable">-C</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> config user.email<span class="token variable">)</span></span>"</span> <span class="token parameter variable">-f</span> design-patterns-for-humans-zh-gh-pages</code></pre></div>'}}),"\n",t.createElement(a.p,null,"å…¶ä¸­ï¼Œ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">design-patterns-for-humans-zh-gh-pages.pub</code>'}})," ä¸ºå…¬é’¥ï¼Œåº”ä¸Šä¼ åˆ° ",t.createElement(a.a,{href:"https://github.com/settings/keys"},"Github è´¦æˆ· SSH keys è®¾ç½®"),"ä¸­ï¼›ä¸å¸¦åç¼€çš„ä¸ºç§é’¥ï¼Œåº”ä½œä¸º ",t.createElement(a.a,{href:"https://github.com/LolipopJ/design-patterns-for-humans-zh/settings/secrets/actions"},"Github é¡¹ç›®ä»“åº“çš„ Secret"),"ï¼Œæ ¹æ®å‰é¢çš„é…ç½®ï¼Œè¿™é‡Œå‘½åä¸º ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">ACCESS_TOKEN</code>'}}),"ã€‚"),"\n",t.createElement(a.h2,null,"æœ€åä¸€æ­¥"),"\n",t.createElement(a.p,null,"æœ€åï¼Œç§»é™¤ Github ä»“åº“ä¸­ç”¨äº Travis çš„åˆ é™¤åŸæœ‰éƒ¨ç½²å¯†é’¥ï¼Œä¾‹å¦‚ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">CI_DEPLOY_TOKEN</code>'}}),"ï¼Œåˆ é™¤é¡¹ç›®ä¸­çš„ ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.travis.yml</code>'}})," æ–‡ä»¶ï¼Œæäº¤ä»£ç åˆ° Github å³å¯ã€‚"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/011718c56e8455246852c7dac3517bfa/a88f6/deploy-finished.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 46.794871794871796%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABpUlEQVR42n2RX0/TYBSH+0UUAttY2/Xf2q5lbAPmNBqN38wP4IV8BeOFMUHnxkaIl94YvTAMo1FCFiGQrTBwj+dtnVkUbfKkOW9On/7OebWj5Ijj4SHJ6ASmE5JkTLe3y8t2h1evFd1/0u7s0Nnpy7vH8xfbdLp9tN77M7bfDmm/O+HNwRXP9gY4YY286bFUtFnMlwSThV9ktZAzyekuRStkpeSzWLCoN++ibfW/s9U/5nF3yJPdUx49/YC/ukFUa1KOGphuhOlFlLyYUjnGcCq/0Z0Q3Q6lp5LKW/ceosEViun0EvV8O/wqf/Wx/CpBdYNy3MCr1LCDKra/KqJMkhGktWIhZ7B+SxKejScoTkcXnIvz4+BL2uCKJG608ON1XFmBkqkkiplkJlRny7Kezdv30cbnExSj5ILLHzD49Dlt8Cp1PJEVZD95w6MgO1XJV4Sc7qSCGaq+sVSkoRL+LcwSWmGdoNbCjTdl/DU5C1LpTDBP3nC5uaxnI1+XUI1nyQWUo3qKYWcy9eGfsnnhtSPvi1BJ3HANRy5CpZ0f7X/C5p0H/ASsZ5PHuhEOnwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="CI éƒ¨ç½²æˆåŠŸ"\n        title=""\n        src="/static/011718c56e8455246852c7dac3517bfa/39c09/deploy-finished.png"\n        srcset="/static/011718c56e8455246852c7dac3517bfa/680fe/deploy-finished.png 156w,\n/static/011718c56e8455246852c7dac3517bfa/17474/deploy-finished.png 312w,\n/static/011718c56e8455246852c7dac3517bfa/39c09/deploy-finished.png 624w,\n/static/011718c56e8455246852c7dac3517bfa/6d2da/deploy-finished.png 936w,\n/static/011718c56e8455246852c7dac3517bfa/5a791/deploy-finished.png 1248w,\n/static/011718c56e8455246852c7dac3517bfa/a88f6/deploy-finished.png 1900w"\n        sizes="(max-width: 624px) 100vw, 624px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}))}var p=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,s.R)(),n.components);return a?t.createElement(a,n,t.createElement(l,n)):l(n)},c=e(197),o=e(4353),u=e.n(o),r=e(4794),i=e(6947),k=e(4017),d=e(1042),m=e(1038);const g={a:n=>{let{href:a="",children:e}=n;const s=!(null!=a&&a.startsWith("#")),l=s?a:`#${encodeURIComponent(a.slice(1))}`;return t.createElement("a",{href:l,target:s?"_blank":void 0,rel:"noreferrer"},e)},img:n=>{const{alt:a="The author is too lazy to give an alt",src:e,...s}=n;return t.createElement("a",{href:e,"data-fancybox":"gallery","data-caption":a},t.createElement("img",Object.assign({src:e,alt:a},s)))},Card:i.A,Link:r.Link},y=n=>{let{children:a,data:e}=n;const{mdx:{fields:{isDraft:l},frontmatter:{title:p,date:o,updated:r,categories:i,tags:d,timeliness:y}}}=e,h=t.useRef(null),b=u()(o),f=r?u()(r):b,E=u()().diff(f,"days");return t.useEffect((()=>{var n;const a=null===(n=h.current)||void 0===n?void 0:n.querySelectorAll("a.gatsby-resp-image-link");return null==a||a.forEach((n=>{const a=n.children.item(1);n.setAttribute("data-fancybox","gallery"),n.setAttribute("data-caption",a.alt)})),c.lX.bind("[data-fancybox]"),()=>c.lX.unbind("[data-fancybox]")}),[]),t.createElement("div",{className:"mx-auto flex max-w-xl flex-col gap-y-12"},t.createElement("div",{className:"flex flex-col gap-4"},(null==i?void 0:i.length)&&t.createElement(k.A,{name:i[0],className:"item-selectable"}),t.createElement("h1",{className:"text-3xl font-bold"},p),t.createElement("div",{className:"item-secondary flex flex-col gap-2 lg:flex-row"},o&&t.createElement("span",{title:`é¦–æ¬¡å‘å¸ƒäºï¼š${b.toString()}\næœ€åæ›´æ–°äºï¼š${f.toString()}`},b.format("MM æœˆ DD æ—¥ YYYY å¹´")),(null==d?void 0:d.length)&&t.createElement("div",{className:"flex flex-1 flex-wrap gap-2 lg:before:content-['â€¢']"},d.map((n=>t.createElement(m.A,{key:n,name:n,className:"item-secondary item-selectable"})))))),t.createElement("article",{ref:h,className:"heti post-entry"},l&&t.createElement("blockquote",{className:"!border-red-400"},"è¿™æ˜¯ä¸€ç¯‡",t.createElement("strong",null,"æœªæ­£å¼å‘å¸ƒ"),"çš„åšå®¢ï¼Œå†…å®¹å¯èƒ½å°šæœªæ’°å†™å®Œå…¨æˆ–å­˜åœ¨ä¸€äº›çº°æ¼ï¼Œå»ºè®®æ‚¨ä»”ç»†è¯„ä¼°ä¿¡æ¯çš„æœ‰æ•ˆæ€§ã€‚"),!1!==y&&E>365&&t.createElement("blockquote",{className:"!border-orange-400"},"è¿™æ˜¯ä¸€ç¯‡",t.createElement("strong",null,"æœ€åæ›´æ–°äº ",E," å¤©å‰"),"çš„åšå®¢ï¼Œå†…å®¹å¯èƒ½éšç€æ—¶é—´çš„æ¨ç§»è€Œå˜å¾—ä¸å†é€‚ç”¨ï¼Œå»ºè®®æ‚¨ä»”ç»†è¯„ä¼°ä¿¡æ¯çš„æœ‰æ•ˆæ€§ã€‚"),t.createElement(s.x,{components:g},a)))},h=n=>{let{data:a}=n;return t.createElement(d.A,{title:String(a.mdx.frontmatter.title)})};function b(n){return t.createElement(y,n,t.createElement(p,n))}}}]);
//# sourceMappingURL=component---src-templates-post-tsx-content-file-path-blog-posts-switch-travis-to-github-workflow-mdx-4879f5e6d624c1233356.js.map