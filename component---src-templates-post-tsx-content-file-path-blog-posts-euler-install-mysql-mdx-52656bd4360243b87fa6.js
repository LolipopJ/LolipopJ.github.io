"use strict";(self.webpackChunkhomepage=self.webpackChunkhomepage||[]).push([[4191],{2705:function(e,a,n){n.r(a),n.d(a,{Head:function(){return k},default:function(){return b}});var s=n(8453),t=n(6540);function l(e){const a=Object.assign({h2:"h2",p:"p",span:"span",a:"a",blockquote:"blockquote"},(0,s.R)(),e.components);return t.createElement(t.Fragment,null,t.createElement(a.h2,null,"查看系统 OS 及架构"),"\n",t.createElement(a.p,null,"以 Euler 系统为例，在终端上输入命令查看，可以通过 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">rpm -qa | grep euleros-release</code>'}})," 命令找到 rpm 包，再通过 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">rpm -qi ${包名}</code>'}})," 查看系统 OS 及架构信息："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@lolipop ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep euleros-release</span>\neuleros-release-2.0SP5-13.eulerosv2r7.x86_64\n<span class="token punctuation">[</span>root@lolipop ~<span class="token punctuation">]</span><span class="token comment"># rpm -qi euleros-release-2.0SP5-13.eulerosv2r7.x86_64</span>\nName        <span class="token builtin class-name">:</span> euleros-release\nVersion     <span class="token builtin class-name">:</span> <span class="token number">2</span>.0SP5\nRelease     <span class="token builtin class-name">:</span> <span class="token number">13</span>.eulerosv2r7\nArchitecture: x86_64\n<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"当然，也可以使用通用的 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">uname -a</code>'}})," 命令。"),"\n",t.createElement(a.p,null,"当前系统为 Euler 2.0 (SP5)，处理器架构为 x86_64。"),"\n",t.createElement(a.h2,null,"下载 MySQL"),"\n",t.createElement(a.p,null,"Euler 2.0 系统基于 CentOS 7 开发，而 CentOS 7 由 Red Hat Enterprise Linux 依照开放源代码规定发布的源代码所编译而成。因此在",t.createElement(a.a,{href:"https://downloads.mysql.com/archives/community/"},"此页面"),"下载 MySQL 的时候，其中的 Operating System 项应选择 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Red Hat Enterprise Linux / Oracle Linux</code>'}}),"，OS Version 应选择 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Red Hat Enterprise Linux 7 / Oracle Linux 7 (x86, 64-bit)</code>'}}),"。接下来，选择下载 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">RPM Bundle</code>'}})," 即可。"),"\n",t.createElement(a.p,null,"例如，在浏览器访问 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.33-1.el7.x86_64.rpm-bundle.tar</code>'}}),"，将自动开始下载 MySQL 5.7.33 适用于 Oracle Linux 7 的 x86_64 版本。"),"\n",t.createElement(a.h2,null,"安装 MySQL"),"\n",t.createElement(a.p,null,"将下载好的档案包传输到 Linux 主机上或 Docker 容器里，解压之："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-xvf</span> mysql-5.7.33-1.el7.x86_64.rpm-bundle.tar</code></pre></div>'}}),"\n",t.createElement(a.p,null,"按顺序安装这些 rpm 包："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-common-5.7.33-1.el7.x86_64.rpm\n<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-libs-5.7.33-1.el7.x86_64.rpm\n<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-client-5.7.33-1.el7.x86_64.rpm\n<span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> mysql-community-server-5.7.33-1.el7.x86_64.rpm</code></pre></div>'}}),"\n",t.createElement(a.p,null,"其它的包并非必须，而是开发时可能会用到的，暂时忽略即可。"),"\n",t.createElement(a.h2,null,"初始化 MySQL"),"\n",t.createElement(a.p,null,"初始化 MySQL 数据库："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mysqld <span class="token parameter variable">-I</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"该命令会初始化默认数据库并创建一个有随机密码的超级用户，密码会打印到 MySQL 的日志中。"),"\n",t.createElement(a.p,null,"如果初始化时出现 ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Fatal error: Please read "Security" section of the manual to find out how to run mysqld as root!</code>'}})," 报错，可以强制使用 root 权限执行："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mysqld <span class="token parameter variable">-I</span> <span class="token parameter variable">--user</span><span class="token operator">=</span>root</code></pre></div>'}}),"\n",t.createElement(a.p,null,"接下来，为目录移除可读权限，这是因为 MySQL 为了安全考虑，会忽略到权限过高的文件："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql /var/lib/mysql</code></pre></div>'}}),"\n",t.createElement(a.h2,null,"启动 MySQL 服务"),"\n",t.createElement(a.p,null,"配置完成后，就可以启动 MySQL 服务了："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">service</span> mysqld start</code></pre></div>'}}),"\n",t.createElement(a.p,null,"确保启动成功，您可以通过这个命令查看 MySQL 服务的状态："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">service</span> mysqld status</code></pre></div>'}}),"\n",t.createElement(a.h2,null,"登录 MySQL"),"\n",t.createElement(a.p,null,"在之前的初始化过程中，我们生成了一个超级用户和它的随机登录密码。可以通过下面的命令查看这个随机密码："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">grep</span> <span class="token parameter variable">-n</span> <span class="token string">\'password\'</span> /var/log/mysqld.log</code></pre></div>'}}),"\n",t.createElement(a.p,null,"例如，打印结果如下："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">Storage:~ <span class="token comment"># grep -n \'password\' /var/log/mysqld.log</span>\n<span class="token number">7</span>:2021-06-02T07:50:39.284449Z <span class="token number">1</span> <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: <span class="token assign-left variable">IN2Scm</span><span class="token operator">=</span>ERki9</code></pre></div>'}}),"\n",t.createElement(a.p,null,"则默认的随机密码为：",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">IN2Scm=ERki9</code>'}}),"，您应当保管好此密码不要泄露，或是修改为新的密码。"),"\n",t.createElement(a.p,null,"使用这个密码，我们就可以登录到 MySQL 中去了："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">Storage:~ <span class="token comment"># mysql -uroot -pIN2Scm=ERki9</span>\nmysql: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> Using a password on the <span class="token builtin class-name">command</span> line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\\</span>g.\nYour MySQL connection <span class="token function">id</span> is <span class="token number">2</span>\nServer version: <span class="token number">5.7</span>.33 MySQL Community Server <span class="token punctuation">(</span>GPL<span class="token punctuation">)</span>\n\nCopyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2021</span>, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType <span class="token string">\'help;\'</span> or <span class="token string">\'\\h\'</span> <span class="token keyword">for</span> help. Type <span class="token string">\'\\c\'</span> to <span class="token function">clear</span> the current input statement.\n\nmysql<span class="token operator">></span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"此时已经可以正常执行 MySQL 数据库操作了。"),"\n",t.createElement(a.p,null,"假如需要修改密码，可以执行下面的语句："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">\'root\'</span><span class="token variable">@\'localhost\'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">\'${新的密码}\'</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(a.blockquote,null,"\n",t.createElement(a.p,null,"注意，新的密码默认情况下需要符合长度，且必须包括数字，小写或大写字母，以及特殊字符。\n尽管不推荐，您也可以设置密码复杂度属性，这样密码只需要满足长度要求即可使用：",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">SET GLOBAL validate_password_policy=0;</code>'}})),"\n"),"\n",t.createElement(a.h2,null,"授权 MySQL 远程连接"),"\n",t.createElement(a.p,null,"登录到 MySQL 中，执行下面的命令："),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">GRANT</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">\'root\'</span><span class="token variable">@\'%\'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">\'${您的密码}\'</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"现在便可以使用其它设备远程连接 MySQL 数据库了。"))}var r=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,s.R)(),e.components);return a?t.createElement(a,e,t.createElement(l,e)):l(e)},c=n(197),o=n(4353),p=n.n(o),u=n(4794),i=n(6947),m=n(4017),g=n(1042),d=n(1038);const h={a:e=>{let{href:a="",children:n}=e;const s=!(null!=a&&a.startsWith("#")),l=s?a:`#${encodeURIComponent(a.slice(1))}`;return t.createElement("a",{href:l,target:s?"_blank":void 0,rel:"noreferrer"},n)},img:e=>{const{alt:a="The author is too lazy to give an alt",src:n,...s}=e;return t.createElement("a",{href:n,"data-fancybox":"gallery","data-caption":a},t.createElement("img",Object.assign({src:n,alt:a},s)))},Card:i.A,Link:u.Link},y=e=>{let{children:a,data:n}=e;const{mdx:{fields:{isDraft:l},frontmatter:{title:r,date:o,updated:u,categories:i,tags:g,timeliness:y}}}=n,k=t.useRef(null),b=p()(o),E=u?p()(u):b,v=p()().diff(E,"days");return t.useEffect((()=>{var e;const a=null===(e=k.current)||void 0===e?void 0:e.querySelectorAll("a.gatsby-resp-image-link");return null==a||a.forEach((e=>{const a=e.children.item(1);e.setAttribute("data-fancybox","gallery"),e.setAttribute("data-caption",a.alt)})),c.lX.bind("[data-fancybox]"),()=>c.lX.unbind("[data-fancybox]")}),[]),t.createElement("div",{className:"mx-auto flex max-w-xl flex-col gap-y-12"},t.createElement("div",{className:"flex flex-col gap-4"},(null==i?void 0:i.length)&&t.createElement(m.A,{name:i[0],className:"item-selectable"}),t.createElement("h1",{className:"text-3xl font-bold"},r),t.createElement("div",{className:"item-secondary flex flex-col gap-2 lg:flex-row"},o&&t.createElement("span",{title:`首次发布于：${b.toString()}\n最后更新于：${E.toString()}`},b.format("MM 月 DD 日 YYYY 年")),(null==g?void 0:g.length)&&t.createElement("div",{className:"flex flex-1 flex-wrap gap-2 lg:before:content-['•']"},g.map((e=>t.createElement(d.A,{key:e,name:e,className:"item-secondary item-selectable"})))))),t.createElement("article",{ref:k,className:"heti post-entry"},l&&t.createElement("blockquote",{className:"!border-red-400"},"这是一篇",t.createElement("strong",null,"未正式发布"),"的博客，内容可能尚未撰写完全或存在一些纰漏，建议您仔细评估信息的有效性。"),!1!==y&&v>365&&t.createElement("blockquote",{className:"!border-orange-400"},"这是一篇",t.createElement("strong",null,"最后更新于 ",v," 天前"),"的博客，内容可能随着时间的推移而变得不再适用，建议您仔细评估信息的有效性。"),t.createElement(s.x,{components:h},a)))},k=e=>{let{data:a}=e;return t.createElement(g.A,{title:String(a.mdx.frontmatter.title)})};function b(e){return t.createElement(y,e,t.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-post-tsx-content-file-path-blog-posts-euler-install-mysql-mdx-52656bd4360243b87fa6.js.map