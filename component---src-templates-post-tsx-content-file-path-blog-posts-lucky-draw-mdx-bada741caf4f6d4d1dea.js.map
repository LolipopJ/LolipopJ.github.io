{"version":3,"file":"component---src-templates-post-tsx-content-file-path-blog-posts-lucky-draw-mdx-bada741caf4f6d4d1dea.js","mappings":"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","sources":["webpack://homepage/./blog/posts/lucky-draw.mdx","webpack://homepage/./src/templates/post.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    strong: \"strong\",\n    del: \"del\",\n    span: \"span\",\n    blockquote: \"blockquote\",\n    img: \"img\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h2, null, \"为什么\"), \"\\n\", React.createElement(_components.p, null, \"前阵子面试的时候被问到这个问题，觉得挺有意思，于是决定亲手实现一个转盘抽奖组件试试。\"), \"\\n\", React.createElement(_components.p, null, \"翻看别人的实现方案时，发现和自己面试时答得相差很大，悲 😢。但总之，是时候开始弥补自己的 CSS 和动画技能了。\"), \"\\n\", React.createElement(_components.h2, null, \"是什么\"), \"\\n\", React.createElement(_components.p, null, \"一个转盘抽奖组件主要由三部分组成，写有中奖结果的圆形转盘、指向结果的指针和开始转动的按钮。\"), \"\\n\", React.createElement(_components.p, null, \"如果每个中奖结果的概率相近，我们可以按照真实概率来划分每个奖品所占圆形的扇形比例。但是通常转盘中会设置抽中概率极小的大奖，按照真实比例的话将无法充分展示奖品内容，而且降低用户对转盘抽奖本身的兴趣度。所以本文实现的转盘组件选择 \", React.createElement(_components.strong, null, \"均分的方式\"), \" 来划分每个奖品所占的扇形比例，符合通用的原则，也从视觉上让用户觉得中奖概率相当。\"), \"\\n\", React.createElement(_components.p, null, \"转盘转动可以有两种方式，一种是指针不动转盘动，一种是转盘不动指针动，都能很好地表达转盘抽奖的过程。对比两种方式，前者的视觉体验会更佳，且指针可以放置在任意位置（在中间往上指或在左侧往右指等等都可以）；后者则相对含蓄一些，用户的视觉负担较低，但指针只能放在中间旋转（我设想了一下在转盘外侧做圆周运动，感觉也有点意思）。因此，本文的实现选择 \", React.createElement(_components.strong, null, \"指针不动转盘动\"), \" 的方式，从前端开发的角度来说，实现了一种方式，另一种方式也可以简单实现了。\"), \"\\n\", React.createElement(_components.p, null, \"当我们点击开始转动的按钮时，转盘便会开始转动。现实生活中的转盘通常由人手力驱动，转盘的 \", React.createElement(_components.strong, null, \"转速会从零迅速加到最大，然后逐渐变小直至为零\"), \"。我们实现的转盘不受这些物理条件的限制，但对现实的充分模拟可以提升转盘抽奖的可信度，本文也将朝着这个方向实现。\"), \"\\n\", React.createElement(_components.p, null, \"当点击按钮时，前端即向后端请求了抽奖的结果，后续转盘的转动也不过是预设好的动画罢了。因此我们可以轻松地计算得到转盘应当旋转的角度，让指针恰恰好停留在奖品所在的扇形区域。这也意味着 \", React.createElement(_components.strong, null, \"转盘旋转的角度可以是一个范围\"), \"，指针并不一定指向扇形区域的正中间，这也是对现实实际的一个模拟。\"), \"\\n\", React.createElement(_components.h2, null, \"怎么做\"), \"\\n\", React.createElement(_components.p, null, \"在深入动画实现之前，让我们先完成 \", React.createElement(_components.del, null, \"简单的\"), \" 前置工作，把转盘抽奖组件的三个必要组成部分画出来。\"), \"\\n\", React.createElement(_components.p, null, \"首先是圆形转盘：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"html\\\"><pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"scss\\\"><pre class=\\\"language-scss\\\"><code class=\\\"language-scss\\\"><span class=\\\"token selector\\\">.container </span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">width</span><span class=\\\"token punctuation\\\">:</span> 500px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">padding</span><span class=\\\"token punctuation\\\">:</span> 40px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">background</span><span class=\\\"token punctuation\\\">:</span> #f8fafc<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">display</span><span class=\\\"token punctuation\\\">:</span> flex<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">justify-content</span><span class=\\\"token punctuation\\\">:</span> center<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token selector\\\">.turntable </span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">position</span><span class=\\\"token punctuation\\\">:</span> relative<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">width</span><span class=\\\"token punctuation\\\">:</span> 400px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">height</span><span class=\\\"token punctuation\\\">:</span> 400px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">border-radius</span><span class=\\\"token punctuation\\\">:</span> 50%<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">Prize</span> <span class=\\\"token punctuation\\\">{</span>\\n  label<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n  probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">;</span>\\n  bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">const</span> prizes<span class=\\\"token operator\\\">:</span> Prize<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"超级大奖\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.001</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#b91c1c\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"特等奖\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.009</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#c2410c\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"一等奖\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.01</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#7e22ce\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"二等奖\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.03</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#2563eb\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"三等奖\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.15</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#15803d\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"安慰奖\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.3</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#1e293b\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">{</span> label<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"谢谢参与\\\"</span><span class=\\\"token punctuation\\\">,</span> probability<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">0.5</span><span class=\\\"token punctuation\\\">,</span> bgColor<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"#3f3f46\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> turntableDom <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"turntable\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> proportionPerPrize <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Number</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">100</span> <span class=\\\"token operator\\\">/</span> prizes<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// #region 划分转盘扇形区域</span>\\n<span class=\\\"token keyword\\\">const</span> turntableConicGradient <span class=\\\"token operator\\\">=</span> prizes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>prize<span class=\\\"token punctuation\\\">,</span> index<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> from <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>proportionPerPrize <span class=\\\"token operator\\\">*</span> index<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> to <span class=\\\"token operator\\\">=</span>\\n    index <span class=\\\"token operator\\\">===</span> prizes<span class=\\\"token punctuation\\\">.</span>length <span class=\\\"token operator\\\">-</span> <span class=\\\"token number\\\">1</span>\\n      <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">100</span>\\n      <span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">(</span>proportionPerPrize <span class=\\\"token operator\\\">*</span> <span class=\\\"token punctuation\\\">(</span>index <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>prize<span class=\\\"token punctuation\\\">.</span>bgColor<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\"> </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span><span class=\\\"token keyword\\\">from</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">% </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>to<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">%</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nturntableDom<span class=\\\"token punctuation\\\">.</span>style<span class=\\\"token punctuation\\\">.</span>background <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">conic-gradient(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>turntableConicGradient<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">join</span><span class=\\\"token punctuation\\\">(</span>\\n  <span class=\\\"token string\\\">\\\",\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">)</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">)</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// #endregion</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"利用 CSS 函数 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">conic-gradient()</code>\"\n    }\n  }), \" 创建颜色渐变，巧妙地实现转盘扇形区域的均分。得到的转盘如下所示：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/e9fea7411105fa7448a750a78cb67aa6/6029f/turntable-base.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 82.6923076923077%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADZ0lEQVR42oWUa2yTZRTHqyHGbA4W6MX1tkvL2DpXRmGTtmv3djdmTPyE4BSDGHCfiInEhW1cRspYAsyQGPngQgIkmrh4CcKuLLYdZkY2M4MGqRg+aCY3jayw3u3P9327DTYrvsnJefPkPL/8z3nOOYpoPMlSi0QTxBN/M/9Jf0nREqJFxfNINE6me5Ip/gWLJWRI6MEs/sDXfNB7mnOHu7l+pJvf+gcJz9yXwVLc/wKloJQYfHHUR3Pzdpx2gbLKavbkmxjNyqJfrSJgt/PrZ58Tl9RmgCqWKjtz9iMqRYhdhNUKm3DWv8iBivUEDAaGjEYGVSr6c3MJHu3JCJWBs5G4DPviwkVMpVV4hEY8niYEdwMbRb+vfB1+rZZBvZ5hg5FhnZER09NMD3+cTj8aewiUlMXEQocehHE3bUVZsB6LTcDlbqS2pvERYB6DOoMI1OGrUhJwLePb5ucIh2aIJlMLShWzkZisbmj0EurCDRSUudCXODCVV+N01uOoe4EOqw2fRs9QoRa/YwWX6rIZq1uBb+MT3PSfW6RyAXj8/VMszyunyOrGaHFiKHFSKIKtVQ10llkYX5NNQMgSQZJfzlj9Sr6qVPBL76GlwHT9Dhw+QW6elaI1ItDslKHGdU6UDXZe97zBQGUTI4KRMSGH8donGW9Yhv95BcH33pYfZ743Hyo8eYpnLOUYX6rh2W3VaHa7UHc4UB5qwrIjSGvxNbxFfnpKz9C7tp0++xYuVGi5/mHXEoXRNPD8D2Nkt21Ac6QGZbcLlVdA6a3A+M5xCnbF2OwJ4jVM0VZ0jb0FN9hnCtKm+YYfB6bl++HI3KNE4ukxm4mEsZ14mZyOKjSdAqpOJ6qD9Zjf+gnTzhnWbvud9tVTHCycpNM8Sbt2gmOOq4TuiV2SFFsm9mgfRtN1/OT7YZ7aWyGCBNReG7o93RTviFD85i3yW/7kFdfPdOVPst88xburJpjou7tI3aJJCc9NylHfaRFqJafdjbnlKqU771Gy6zarW/7A9tpNWvXf0bryMiM90+KYpsTaPW6WxfSlYe678iX2rpPoXg2xasstVFvviP426u132b35Blf67sgbaD7NxwIXts1sioGJMMc+vc/+syHZ918O81dYWmSpjLCM62s+/UQyObcJF5t0Lu3L/9qH/wCw6gQHJHP8xgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"turntable-base\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/e9fea7411105fa7448a750a78cb67aa6/39c09/turntable-base.png\\\"\\n        srcset=\\\"/static/e9fea7411105fa7448a750a78cb67aa6/680fe/turntable-base.png 156w,\\n/static/e9fea7411105fa7448a750a78cb67aa6/17474/turntable-base.png 312w,\\n/static/e9fea7411105fa7448a750a78cb67aa6/39c09/turntable-base.png 624w,\\n/static/e9fea7411105fa7448a750a78cb67aa6/6029f/turntable-base.png 906w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"接着为每个扇形区域添加具体的奖品名称：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"scss\\\"><pre class=\\\"language-scss\\\"><code class=\\\"language-scss\\\"><span class=\\\"token selector\\\">.prize-label </span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">position</span><span class=\\\"token punctuation\\\">:</span> absolute<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">width</span><span class=\\\"token punctuation\\\">:</span> 100%<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">height</span><span class=\\\"token punctuation\\\">:</span> 100%<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">display</span><span class=\\\"token punctuation\\\">:</span> flex<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">justify-content</span><span class=\\\"token punctuation\\\">:</span> center<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">align-items</span><span class=\\\"token punctuation\\\">:</span> baseline<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">font-weight</span><span class=\\\"token punctuation\\\">:</span> bold<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">color</span><span class=\\\"token punctuation\\\">:</span> white<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// #region 调整奖品名的位置</span>\\n  <span class=\\\"token property\\\">line-height</span><span class=\\\"token punctuation\\\">:</span> 100px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// #endregion</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">const</span> anglePerPrize <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Number</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">360</span> <span class=\\\"token operator\\\">/</span> prizes<span class=\\\"token punctuation\\\">.</span>length<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// #region 添加奖品名节点</span>\\n<span class=\\\"token keyword\\\">const</span> prizeLabels <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createDocumentFragment</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nprizes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">map</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>prize<span class=\\\"token punctuation\\\">,</span> index<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> prizeLabel <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createElement</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"div\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  prizeLabel<span class=\\\"token punctuation\\\">.</span>classList<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">add</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"prize-label\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  prizeLabel<span class=\\\"token punctuation\\\">.</span>style<span class=\\\"token punctuation\\\">.</span>transform <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">rotate(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>\\n    <span class=\\\"token operator\\\">-</span>anglePerPrize <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span> <span class=\\\"token operator\\\">+</span> anglePerPrize <span class=\\\"token operator\\\">*</span> <span class=\\\"token punctuation\\\">(</span>index <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">deg)</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n  prizeLabel<span class=\\\"token punctuation\\\">.</span>innerText <span class=\\\"token operator\\\">=</span> prize<span class=\\\"token punctuation\\\">.</span>label<span class=\\\"token punctuation\\\">;</span>\\n  prizeLabels<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">appendChild</span><span class=\\\"token punctuation\\\">(</span>prizeLabel<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nturntableDom<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">append</span><span class=\\\"token punctuation\\\">(</span>prizeLabels<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// #endregion</span>\\n\\n<span class=\\\"token comment\\\">// #region 设置转盘初始角度</span>\\n<span class=\\\"token keyword\\\">const</span> turntableBaseRotate <span class=\\\"token operator\\\">=</span> <span class=\\\"token operator\\\">-</span>anglePerPrize <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">;</span>\\nturntableDom<span class=\\\"token punctuation\\\">.</span>style<span class=\\\"token punctuation\\\">.</span>transform <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">rotate(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>turntableBaseRotate<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">deg)</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token comment\\\">// #endregion</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"我们手动创建了包含奖品名的标签节点，通过简单的计算，让它们旋转到自己所属的扇形区域上。此外，我们还为转盘设置了一个初始角度，使得第一个奖品呈现在转盘的正上方。效果如下所示：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/e72e4a074197ec4a86d6e5c855de2466/6029f/turntable-with-prize-labels.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 82.6923076923077%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADdklEQVR42o2Ua2yTZRTH6y1CogS7FuvWdpd2olK39bJL7doyu8mKjOhwI4Sx+IGBUaIyHQ4rRFidi0OXCBpi0IwP0yDEkDnG5jbGJlsWHUSHwUWjXxxEkEVdad/e6M/37W4UJPAkJ0+ey/nlf57znCMLhqNcb0IwQjB6lQgQvcaktbQvBMP8n59kshtgoQgxyXHKx/nOLs6908hY3TbOeRuZ6DiO/x8fYelcvHdLoASTRseJARpWP0uPXE53qpZevZ5udQqdcgXDq8xc6Dt0U6jseljrwTaM5iewFzj5QpvK9243oxuqGHIVi3AVJ6330meS8dtn3hlo+EZgIBiOw3p6+zEarbz4wsu4y9fxyuMm+hUKjimSOK5U0ZctZ2ilgjOb7fTnyTjf9Xn8XYVgaB4oKQtFrnIlEKSiYj1r11azrW47NnsxJY5iDmfo6FNr6M5QM+BcxIBjIWfrKxkp1zPyXCaCb0pMVGwufNmsuoHBYXJz7ZSVleNyuVkuAguedPNGtqhSpaYnW8m3roWcWn4Pw0V3MVK6gBP5d3OhvzNBpcwvhOLA9/d+SpI6i8eMTnIsRRRYXdicT7GisIT2DBXDDvHtipbQYbPQZqniE2MDDclt9Oz5Pe4vCJFZ4LTCHd4WkrQmlpqKSXnYinaZDd2jhWTk2KgqqWa/4SPe1XWyUzeKJ+1n3kz/ldcVYxz1/CF+s5ioMJqosOmD/aQbHGyp3clDmXmkLi1EY7CzZKMRZd0BHCsF6jPH2JV2Bk/qKK3rx9khzl1NE3H/wLzCaeCxb06i0udRsnoDaXoRlm/jwVoniiYz2q0fkr7Jj3ndBFsNY3g1o3xcNo4n5TQ/fD2ZCJzN8tSVAFbXGhYrs9CWOljssfLAbhuKt81oavfxyPN+NBsvkVl9iZqCcd5aNEKz9Sy+f8OEomK4oWv+oX8m00eOdnPfqhzkDTayWsrRNT5N0i4TWhGoF4HGly5ifnWS1JrLlOb+wulDfyWoS6iUwEylNJ9q5Y46A6aWStYcrCXZmx8HLqsJsHnv31i2XEZeeZH32v3ibbFRhG6jlo/82IthzzMsqLdwZ72O+ze1oKzwk1z1J7bXJvlqaBp26+YQjsxBfYJA+0+D7O7dx/YvB2k+HKLjOz9T/sicMuF22td0+GEi0RjzIxaHSBaJSrUfvWk//A8q7Av/h7tdeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"turntable-with-prize-labels\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/e72e4a074197ec4a86d6e5c855de2466/39c09/turntable-with-prize-labels.png\\\"\\n        srcset=\\\"/static/e72e4a074197ec4a86d6e5c855de2466/680fe/turntable-with-prize-labels.png 156w,\\n/static/e72e4a074197ec4a86d6e5c855de2466/17474/turntable-with-prize-labels.png 312w,\\n/static/e72e4a074197ec4a86d6e5c855de2466/39c09/turntable-with-prize-labels.png 624w,\\n/static/e72e4a074197ec4a86d6e5c855de2466/6029f/turntable-with-prize-labels.png 906w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.blockquote, null, \"\\n\", React.createElement(_components.p, null, \"更精致、美观的转盘设计还是建议直接使用做好的转盘图片；纯前端实现的话一方面耗时耗力，另一方面如果请求过多的装饰图片反而会降低访问性能。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"html\\\"><pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>path/to/turntable.png<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>img</span><span class=\\\"token punctuation\\\">></span></span></code></pre></div>\"\n    }\n  }), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"接下来添加指针和抽奖按钮：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"html\\\"><pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>container<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>turntable<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>arrow<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>lottery-btn<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>lottery-btn<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>抽奖<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"scss\\\"><pre class=\\\"language-scss\\\"><code class=\\\"language-scss\\\"><span class=\\\"token selector\\\">.arrow </span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">position</span><span class=\\\"token punctuation\\\">:</span> absolute<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">top</span><span class=\\\"token punctuation\\\">:</span> 140px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">width</span><span class=\\\"token punctuation\\\">:</span> 0<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">height</span><span class=\\\"token punctuation\\\">:</span> 0<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">border-left</span><span class=\\\"token punctuation\\\">:</span> 15px solid transparent<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">border-right</span><span class=\\\"token punctuation\\\">:</span> 15px solid transparent<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">border-bottom</span><span class=\\\"token punctuation\\\">:</span> 100px solid #f8fafc<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token selector\\\">.lottery-btn </span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">position</span><span class=\\\"token punctuation\\\">:</span> absolute<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">top</span><span class=\\\"token punctuation\\\">:</span> 200px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">width</span><span class=\\\"token punctuation\\\">:</span> 80px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">height</span><span class=\\\"token punctuation\\\">:</span> 80px<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">border-radius</span><span class=\\\"token punctuation\\\">:</span> 50%<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">background</span><span class=\\\"token punctuation\\\">:</span> #f8fafc<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">display</span><span class=\\\"token punctuation\\\">:</span> flex<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">justify-content</span><span class=\\\"token punctuation\\\">:</span> center<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">align-items</span><span class=\\\"token punctuation\\\">:</span> center<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">color</span><span class=\\\"token punctuation\\\">:</span> #333<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">font-weight</span><span class=\\\"token punctuation\\\">:</span> bold<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">cursor</span><span class=\\\"token punctuation\\\">:</span> pointer<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token property\\\">user-select</span><span class=\\\"token punctuation\\\">:</span> none<span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token selector\\\"><span class=\\\"token parent important\\\">&amp;</span>--disabled </span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token property\\\">color</span><span class=\\\"token punctuation\\\">:</span> #999<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token property\\\">pointer-events</span><span class=\\\"token punctuation\\\">:</span> none<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"使用绝对定位将指针和按钮放到合适的位置，转盘现在看上去有模有样了：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/90de7a597b7ced59a9d2050a707766e4/6029f/turntable-with-all.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 82.6923076923077%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADeklEQVR42o2Uf0zUdRjHr1+LNmV23DXix+HNY2SdyB13wHHc0e1ggxJXGFhTWG2RrVzpFYpduJSLuYCI4Vxzq+EWOos1ZxeCgAgJYwWWyJRV8kedLk3MOO/3ea++d/zyNKef7dln3+/n87z2fp7n8zwirz/I7ebxBvAGbxIAgrdY+Dv83+P1839+YRPdAfMFCIUdZ5xc7Ozi3Mf1jFdv45ytHof9GK7rTvzhc+HePYFhWHjZTwxQt/ZFesRiulNk9CoUdCcl0imWMLwmk0t9h+8KFd0OazvQjiozF0NOPodkKfxUXMxoRQVD5gIBHs9J3aP0qUVc+NI2B/XfCXR7/RFYT28/KpWOt958h+LSV3h3lZp+iQR7nJhj0nj6VosZek7C6U0G+rNEXOw6GMmrx+tbBIaV+QI3ueH2Ula2gfXrK9lWvQO9oYBCwTqEcIcN+RyXJzGYH8uA8THO1pQzUqpg5KVUPM4ZoVChhfBF8+oGBofRag2UlJRiNhfzrLGAHFMRW5UZ/G7dSY8ylh/MMZwyPcKw6SFGimI4kf0wl/o7o1SKXB5fBNjU+gVxSek8rconQ2NCpy9EK+SxpakF73UX51u206dfij1PS7tmI/tVddQltNPTOBXx93gC88BZhbW2ZuJkatLUBSSm5ZK8Mpe01SZ+Hpvgwh9TOM44aFrVTa18FKv8PB/If+N9yThHrH8KzywkKAxGK9zz6efIlUY2W3byZGoW8jQD0pVatn/VyNT0NT7bf42t8gnq5KexpozStmGSWmHv2uOI+LsXFc4Cvz9+knhFFoVrK1iuyCM5W88TFiNLPlKy3LKPpEo3mS87hJyOY0seZV/JJNbEMX75bjoaOF/lmRtudOZ1LJOmIysyssyq4/HdeUh3aUjc0spTr7lIfv0KqZVXqMqZ5MPYERp0Z3H+68cXFML13fIOXXOV7jjSzZI1GYjr9KQ3l7Ki/nnidqmRWfaieNWF6u3LZG6ZJqXqKkXaXxk7/HeUuqhOcc91SsOpNh6oVqJuLmfdAQsJtuwI8JkqN5ta/0Gz+Sri8st8ctQl3BYGhe8+ernjTC/KxheIqdHwYM0Klr7RjLTMRcLGv9C/N823Q7Owew8Hf2AB6vR4ODoxyO7evez4epCGb3zYf3Qx4wosKPPcz/iaDd9PIBhicYUikLAFguHeD951Hv4H6UAYe0OLzAYAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"turntable-with-all\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/90de7a597b7ced59a9d2050a707766e4/39c09/turntable-with-all.png\\\"\\n        srcset=\\\"/static/90de7a597b7ced59a9d2050a707766e4/680fe/turntable-with-all.png 156w,\\n/static/90de7a597b7ced59a9d2050a707766e4/17474/turntable-with-all.png 312w,\\n/static/90de7a597b7ced59a9d2050a707766e4/39c09/turntable-with-all.png 624w,\\n/static/90de7a597b7ced59a9d2050a707766e4/6029f/turntable-with-all.png 906w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"最重要的环节到了，实现转盘抽奖的核心需求：转！\"), \"\\n\", React.createElement(_components.p, null, \"首先实现一个支持生成小数位后 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">precision</code>\"\n    }\n  }), \" 位精度的随机数的方法，它将被用于模拟抽奖结果（当然这应当由后端完成），以及计算转盘应当旋转的角度：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">getRandomNumber</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>min<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">,</span> max<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">,</span> precision<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">number</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> factor <span class=\\\"token operator\\\">=</span> Math<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">pow</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">,</span> precision<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> random <span class=\\\"token operator\\\">=</span> Math<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">random</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token punctuation\\\">(</span>max <span class=\\\"token operator\\\">-</span> min<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">+</span> min<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> Math<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">round</span><span class=\\\"token punctuation\\\">(</span>random <span class=\\\"token operator\\\">*</span> factor<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">/</span> factor<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"基于刚刚实现的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">getRandomNumber()</code>\"\n    }\n  }), \" 方法，完成我们的抽奖事件：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">const</span> animationDuration <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">5000</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> rotateLapsBase <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">let</span> rotateLaps <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> lotteryBtnDom <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"lottery-btn\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\nlotteryBtnDom<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">onclick</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  lotteryBtnDom<span class=\\\"token punctuation\\\">.</span>classList<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">add</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"lottery-btn--disabled\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token comment\\\">// #region 模拟抽奖结果，由后端完成</span>\\n  <span class=\\\"token keyword\\\">let</span> prizeIndex <span class=\\\"token operator\\\">=</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">let</span> resultNum <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">getRandomNumber</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 本文预设奖品的中奖概率精确到小数点后 3 位，因此这里的 `precision` 设为 3</span>\\n  <span class=\\\"token keyword\\\">while</span> <span class=\\\"token punctuation\\\">(</span>resultNum <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    resultNum <span class=\\\"token operator\\\">-=</span> prizes<span class=\\\"token punctuation\\\">[</span>prizeIndex<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">.</span>probability<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>resultNum <span class=\\\"token operator\\\">></span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n      prizeIndex <span class=\\\"token operator\\\">+=</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token keyword\\\">const</span> prize <span class=\\\"token operator\\\">=</span> prizes<span class=\\\"token punctuation\\\">[</span>prizeIndex<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// #endregion</span>\\n\\n  <span class=\\\"token comment\\\">// #region 获取转盘需要旋转的角度</span>\\n  <span class=\\\"token keyword\\\">const</span> turntableRotateDegFrom <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Number</span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token punctuation\\\">(</span>anglePerPrize <span class=\\\"token operator\\\">*</span> prizeIndex<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> turntableRotateDegTo <span class=\\\"token operator\\\">=</span>\\n    prizeIndex <span class=\\\"token operator\\\">===</span> prizes<span class=\\\"token punctuation\\\">.</span>length <span class=\\\"token operator\\\">-</span> <span class=\\\"token number\\\">1</span>\\n      <span class=\\\"token operator\\\">?</span> <span class=\\\"token number\\\">360</span>\\n      <span class=\\\"token operator\\\">:</span> <span class=\\\"token function\\\">Number</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>anglePerPrize <span class=\\\"token operator\\\">*</span> <span class=\\\"token punctuation\\\">(</span>prizeIndex <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> turntableRotateDegEdgeThreshold <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">Number</span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token punctuation\\\">(</span>anglePerPrize <span class=\\\"token operator\\\">/</span> <span class=\\\"token number\\\">4</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toFixed</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 设定旋转到指定扇形区域的距边缘阈值（&lt;= anglePerPrize / 2），防止出现指针指向太靠近边缘的情况</span>\\n  <span class=\\\"token keyword\\\">const</span> turntableRotateDegBase <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">getRandomNumber</span><span class=\\\"token punctuation\\\">(</span>\\n    turntableRotateDegFrom <span class=\\\"token operator\\\">+</span> turntableRotateDegEdgeThreshold<span class=\\\"token punctuation\\\">,</span>\\n    turntableRotateDegTo <span class=\\\"token operator\\\">-</span> turntableRotateDegEdgeThreshold<span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  rotateLaps <span class=\\\"token operator\\\">+=</span> rotateLapsBase<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// 适配多次旋转的情况</span>\\n  <span class=\\\"token keyword\\\">const</span> turntableRotateDeg <span class=\\\"token operator\\\">=</span> <span class=\\\"token operator\\\">-</span><span class=\\\"token punctuation\\\">(</span>rotateLaps <span class=\\\"token operator\\\">*</span> <span class=\\\"token number\\\">360</span> <span class=\\\"token operator\\\">+</span> turntableRotateDegBase<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// #endregion</span>\\n\\n  <span class=\\\"token comment\\\">// #region 为转盘设置旋转动画</span>\\n  turntableDom<span class=\\\"token punctuation\\\">.</span>style<span class=\\\"token punctuation\\\">.</span>transform <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">rotate(</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>turntableRotateDeg<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">deg)</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n  turntableDom<span class=\\\"token punctuation\\\">.</span>style<span class=\\\"token punctuation\\\">.</span>transition <span class=\\\"token operator\\\">=</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">transform </span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>animationDuration<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">ms ease-out</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">// #endregion</span>\\n\\n  <span class=\\\"token function\\\">setTimeout</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">alert</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">您抽中了：</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>prize<span class=\\\"token punctuation\\\">.</span>label<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">！</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    lotteryBtnDom<span class=\\\"token punctuation\\\">.</span>classList<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">remove</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"lottery-btn--disabled\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> animationDuration <span class=\\\"token operator\\\">+</span> <span class=\\\"token number\\\">500</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"计算实际中奖结果所在的扇形区域角度 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">turntableRotateDegFrom</code>\"\n    }\n  }), \" 至 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">turntableRotateDegTo</code>\"\n    }\n  }), \"，分别加上和减去距离边缘的阈值 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">turntableRotateDegEdgeThreshold</code>\"\n    }\n  }), \"，将得到的范围取随机数，即可得到我们最后转盘应旋转的角度 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">turntableRotateDegBase</code>\"\n    }\n  }), \"。将应旋转的角度再加上设定好的旋转圈数所对应的角度，取反即可得到动画效果中实际旋转的角度 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">turntableRotateDeg</code>\"\n    }\n  }), \"。\"), \"\\n\", React.createElement(_components.p, null, \"点击抽奖按钮，看看现在的效果吧：\"), \"\\n\", React.createElement(_components.img, {\n    src: \"/images/lucky-draw-base-animation+cf935b3d0e07c8f55476736c29d6f0e8.gif\",\n    alt: \"lucky-draw-base-animation\"\n  }), \"\\n\", React.createElement(_components.p, null, \"Ops，竟然是谢谢参与，我觉得有黑幕！但是可喜可贺，我们已经基本实现了转盘抽奖组件所需的全部能力。\"), \"\\n\", React.createElement(_components.p, null, \"下面，为了使转盘旋转的效果更贴近生活实际，我们可以为旋转动画设置更符合物理直觉的过渡效果。\"), \"\\n\", React.createElement(_components.p, null, \"刚刚为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">transform</code>\"\n    }\n  }), \" 设置的动画过渡效果 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">transition-timing-function: ease-out;</code>\"\n    }\n  }), \" 相当于 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">transition-timing-function: cubic-bezier(0, 0, .58, 1);</code>\"\n    }\n  }), \"，表示动画一开始较快，随着动画的进行逐渐减速。\"), \"\\n\", React.createElement(_components.p, null, \"但是转盘从转动减速至停止的过渡时间太短，从视觉上看尤为突兀，要是稍长一些就好了。\"), \"\\n\", React.createElement(_components.p, null, \"通过 \", React.createElement(_components.a, {\n    href: \"https://cubic-bezier.com/\"\n  }, \"cubic-bezier\"), \"，我们以可视化的方式实现一个满足需要的三次贝塞尔曲线，作为动画的过渡效果。如：\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">transition-timing-function: cubic-bezier(.3, .9, .38, 1);</code>\"\n    }\n  }), \"，它减速至停止的 \", React.createElement(_components.strong, null, \"过渡时间更长且更柔和\"), \"，效果如下：\"), \"\\n\", React.createElement(_components.img, {\n    src: \"/images/lucky-draw-better-animation+e325b310000530ace660c5c6d2ecd536.gif\",\n    alt: \"lucky-draw-better-animation\"\n  }), \"\\n\", React.createElement(_components.p, null, \"完整的 Demo 奉上：\"), \"\\n\", React.createElement(\"iframe\", {\n    height: \"600\",\n    scrolling: \"no\",\n    title: \"lucky-draw-demo\",\n    src: \"https://codepen.io/LolipopJ/embed/QWXzwWp?default-tab=html%2Cresult\",\n    frameBorder: \"no\",\n    loading: \"lazy\",\n    allowtransparency: \"true\",\n    allowFullScreen: true\n  }, React.createElement(_components.p, null, \"See the Pen\", \" \", \"\\n\", React.createElement(\"a\", {\n    href: \"https://codepen.io/LolipopJ/pen/QWXzwWp\"\n  }, \"lucky-draw-demo\"), \" by\\nJasonSung (\", React.createElement(\"a\", {\n    href: \"https://codepen.io/LolipopJ\"\n  }, \"@LolipopJ\"), \") on\", \" \", \"\\n\", React.createElement(\"a\", {\n    href: \"https://codepen.io\"\n  }, \"CodePen\"), \".\")));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/homepage/homepage/blog/posts/lucky-draw.mdx\";\nimport {Fancybox} from \"@fancyapps/ui\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport dayjs from \"dayjs\";\nimport {Link} from \"gatsby\";\nimport * as React from \"react\";\nimport Card from \"../components/card\";\nimport Category from \"../components/category\";\nimport SEO from \"../components/seo\";\nimport Tag from \"../components/tag\";\nconst FancyBoxImage = props => {\n  const {alt = \"The author is too lazy to give an alt\", src, ...restProps} = props;\n  return React.createElement(\"a\", {\n    href: src,\n    \"data-fancybox\": \"gallery\",\n    \"data-caption\": alt\n  }, React.createElement(\"img\", Object.assign({\n    src: src,\n    alt: alt\n  }, restProps)));\n};\nconst ALink = _ref => {\n  let {href = \"\", children} = _ref;\n  const isExternalHref = !(href !== null && href !== void 0 && href.startsWith(\"#\"));\n  const parsedHref = isExternalHref ? href : `#${encodeURIComponent(href.slice(1))}`;\n  return React.createElement(\"a\", {\n    href: parsedHref,\n    target: isExternalHref ? \"_blank\" : undefined,\n    rel: \"noreferrer\"\n  }, children);\n};\nconst components = {\n  a: ALink,\n  img: FancyBoxImage,\n  Card,\n  Link\n};\nconst PostTemplate = _ref2 => {\n  let {children, pageContext} = _ref2;\n  const {frontmatter: {title, date: dateString, updated: updatedDateString, categories, tags, timeliness = true}} = pageContext;\n  const articleRef = React.useRef(null);\n  const date = dayjs(dateString);\n  const updatedDate = updatedDateString ? dayjs(updatedDateString) : date;\n  const today = dayjs();\n  const diffDays = today.diff(updatedDate, \"days\");\n  React.useEffect(() => {\n    var _articleRef$current;\n    const optimizedImageLinks = (_articleRef$current = articleRef.current) === null || _articleRef$current === void 0 ? void 0 : _articleRef$current.querySelectorAll(\"a.gatsby-resp-image-link\");\n    optimizedImageLinks === null || optimizedImageLinks === void 0 ? void 0 : optimizedImageLinks.forEach(link => {\n      const image = link.children.item(1);\n      link.setAttribute(\"data-fancybox\", \"gallery\");\n      link.setAttribute(\"data-caption\", image.alt);\n    });\n    Fancybox.bind(\"[data-fancybox]\");\n    return () => Fancybox.unbind(\"[data-fancybox]\");\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"mx-auto flex max-w-xl flex-col gap-y-12\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col gap-4\"\n  }, (categories === null || categories === void 0 ? void 0 : categories.length) && React.createElement(Category, {\n    name: categories[0],\n    className: \"item-selectable\"\n  }), React.createElement(\"h1\", {\n    className: \"text-3xl font-bold\"\n  }, title), React.createElement(\"div\", {\n    className: \"item-secondary flex gap-2\"\n  }, dateString && React.createElement(\"span\", {\n    title: `首次发布于：${date.toString()}\\n最后更新于：${updatedDate.toString()}`\n  }, date.format(\"MM 月 DD 日 YYYY 年\")), (tags === null || tags === void 0 ? void 0 : tags.length) && React.createElement(\"div\", {\n    className: \"flex flex-1 flex-wrap gap-2 before:content-['\\u2022']\"\n  }, tags.map(tag => React.createElement(Tag, {\n    key: tag,\n    name: tag,\n    className: \"item-secondary item-selectable\"\n  }))))), React.createElement(\"article\", {\n    ref: articleRef,\n    className: \"heti post-entry\"\n  }, timeliness && diffDays > 365 && React.createElement(\"blockquote\", {\n    className: \"border-l-4 border-orange-400\"\n  }, \"\\u8FD9\\u662F\\u4E00\\u7BC7\", React.createElement(\"strong\", null, \"\\u6700\\u540E\\u66F4\\u65B0\\u4E8E \", diffDays, \" \\u5929\\u524D\"), \"\\u7684\\u535A\\u5BA2\\uFF0C\\u5185\\u5BB9\\u53EF\\u80FD\\u968F\\u7740\\u65F6\\u95F4\\u7684\\u63A8\\u79FB\\u800C\\u53D8\\u5F97\\u4E0D\\u518D\\u9002\\u7528\\uFF0C\\u5EFA\\u8BAE\\u60A8\\u4ED4\\u7EC6\\u8BC4\\u4F30\\u4FE1\\u606F\\u7684\\u6709\\u6548\\u6027\\u3002\"), React.createElement(MDXProvider, {\n    components: components\n  }, children)));\n};\nexport const Head = _ref3 => {\n  let {pageContext} = _ref3;\n  return React.createElement(SEO, {\n    title: pageContext.frontmatter.title\n  });\n};\nPostTemplate\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","h2","p","strong","del","span","blockquote","img","a","_provideComponents","components","React","dangerouslySetInnerHTML","__html","src","alt","href","height","scrolling","title","frameBorder","loading","allowtransparency","allowFullScreen","wrapper","MDXLayout","_ref","children","isExternalHref","startsWith","parsedHref","encodeURIComponent","slice","target","undefined","rel","restProps","Card","Link","PostTemplate","_ref2","pageContext","frontmatter","date","dateString","updated","updatedDateString","categories","tags","timeliness","articleRef","dayjs","updatedDate","diffDays","diff","_articleRef$current","optimizedImageLinks","current","querySelectorAll","forEach","link","image","item","setAttribute","Fancybox","bind","unbind","className","length","Category","name","toString","format","map","tag","Tag","key","ref","MDXProvider","Head","_ref3","SEO","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}