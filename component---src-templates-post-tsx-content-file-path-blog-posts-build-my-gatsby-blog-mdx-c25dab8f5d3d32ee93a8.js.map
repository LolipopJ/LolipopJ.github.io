{"version":3,"file":"component---src-templates-post-tsx-content-file-path-blog-posts-build-my-gatsby-blog-mdx-c25dab8f5d3d32ee93a8.js","mappings":"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","sources":["webpack://homepage/./blog/posts/build-my-gatsby-blog.mdx","webpack://homepage/./src/templates/post.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    a: \"a\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\",\n    h3: \"h3\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {Link} = _components;\n  if (!Link) _missingMdxReference(\"Link\", true);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h2, null, \"碎碎念\"), \"\\n\", React.createElement(_components.p, null, \"搭建一个自己的博客是无数跻身于 IT 行业开发者的心中最质朴的愿望！\"), \"\\n\", React.createElement(_components.p, null, \"回想笔者的历程，刚上大学的时候就摩拳擦掌想要实现一个博客系统，但在 Github 上创建了仓库以后就开始了无限期的拖延：自己没有任何的开发经验，不知道框架也不知道 UI 组件库，只知道要写 HTML + CSS + JavaScript 代码，面对眼前想要实现的完整系统不知该如何下手。\"), \"\\n\", React.createElement(_components.p, null, \"从零开始实现博客系统的计划虽然搁浅，但是拥有一个自己的博客的愿望没有改变。如果自己还没有能力去开发，那末至少基于现有的博客平台去搭建一个博客吧，毕竟对于博客来说，最重要的还是内容本身。终于在大二上学期的时候收集资料，横向对比，考量不同博客平台的优势与短板，最终选择了基于 Hexo 搭建自己的静态博客系统，能够部署在 Github Pages 上而不需要自己去维护服务器。还根据自己搭建的经验，模仿别人写了一篇搭建 Hexo 博客的\", React.createElement(Link, {\n    to: \"/posts/hello-hexo-world\"\n  }, \"简易教程\"), \"，这篇教程也顺理成章成为了自己的第一篇技术博客。\"), \"\\n\", React.createElement(_components.p, null, \"Hexo 由目录结构驱动，简单好用，作为博主可以全身心投入到博客的撰写中去。Hexo 的生态里已经有着非常多的惹眼且实用的博客主题，下载到到对应目录下再修改全局配置项即可一键启用。笔者在大学生涯相当慢热，直到认为自己应该开始做某件事情时，才不留余力地去 push 自己，可谓是充分享受了青春。因此在拥有了博客系统之后，反而失去了很多原初的动力，又因为自己并没有沉浸于对技术的学习中去，也就没有什么好写下来记成博客的。\"), \"\\n\", React.createElement(_components.p, null, \"直到大三下学期，笔者选定了成为前端开发工程师的道路，在众多面经中看到了博客的重要性，于是开始慢慢写起来。将实习遇到的困难，竞赛项目里的开发经验，以及自学过程中的收获整理为一篇篇博客，上传到自己的仓库里。望着终于能翻页的个人博客，一种纯粹的满足感油然而生。\"), \"\\n\", React.createElement(_components.p, null, \"后来又觉得自己的大学生涯有些太平淡了，于是便挑战向 Github 别人的项目提交 PR，其中提的最多的 PR 是给自己在用的博客主题 —— \", React.createElement(_components.a, {\n    href: \"https://github.com/fi3ework/hexo-theme-archer\"\n  }, \"hexo-theme-archer\"), \" 的，另外还成功申请成为了它的维护者，自发地帮忙去解决堆积的 Issues。现在想来那时候的自己还非常的稚嫩，Issues 里提什么就做什么，没有认真分析过它是否真的是一个问题。例如有个 Issue 提到希望提供图片左右浮动的功能，自己就写了两个样式类塞到主题里并贴上如何使用，但实际上这样的功能只需要博主在撰写博客的时候使用 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">&lt;img></code>\"\n    }\n  }), \" 标签的形式再添加行内样式就可以了。不过当然也有自认为做得不错的工作，例如看到有人提了一个 PR 为主题添加了暗色模式支持，一下子激发起了我的兴趣，于是在这个 PR 的基础上花了几天的功夫实现了完全的暗色模式适配，想必为大家的眼睛起到了一些保护的作用。\"), \"\\n\", React.createElement(_components.p, null, \"时间流转，随着前端开发成为了自己的工作，站点开发已然成为烹小鲜般的事情，不再神秘。某天笔者偶然看到了 \", React.createElement(_components.a, {\n    href: \"https://thesis.priority.vision/\"\n  }, \"Thesis Theme Vision\"), \"，很有笔记软件的感觉，十分符合自己对博客系统的审美喜好，终于耐不住想要去复刻实现的愿望，于是又创建了一个 Github 仓库。这一次，确实从零开始了自己的博客系统搭建工程。\"), \"\\n\", React.createElement(_components.h2, null, \"技术选型\"), \"\\n\", React.createElement(_components.p, null, \"笔者最初考虑的是为 Hexo 开发一个主题，但是我实在很难投入到学习其支持的 EJS 或 Pug 这些模板语言中去，思来想去还是继续投资到我擅长的且更有未来的 React 中去吧，遂决定另起炉灶。\"), \"\\n\", React.createElement(_components.p, null, \"接下来无论是选择 Next.js 或 Umi 作为开发框架都没有问题，甚至直接基于 React 手搓也没有问题，但笔者还是对 Gatsby 和 Docusaurus 这类所谓的“静态站点生成器”非常感兴趣。考虑到笔者自身对博客系统高可自定义性的需要，最终选择了 Gatsby 作为框架。核心使用到的库版本如下：\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby@^5.0.0</code>\"\n    }\n  })), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">react@^18.0.0</code>\"\n    }\n  })), \"\\n\"), \"\\n\", React.createElement(_components.h2, null, \"解析并渲染博客\"), \"\\n\", React.createElement(_components.h3, null, \"解析 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.mdx</code>\"\n    }\n  }), \" 文件为博客\"), \"\\n\", React.createElement(_components.p, null, \"不同于 Hexo 的将文件塞到 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">source/_posts/</code>\"\n    }\n  }), \" 目录下即识别为一篇博客，Gatsby 要求开发者实现“解析数据源到数据层”和“组件从数据层查询”两个阶段的工作。援引官方文档的数据层介绍图片如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/b39469a6cc4b6e74a3741eeb1c86e81e/5df5d/data-layer.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 64.1025641025641%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAABYlAAAWJQFJUiTwAAABwUlEQVR42k1Sa2/bMAz0//9fQ/e1QItiQbM265wYsWPrSVIvuyc57UYYNk0ej+JRnaQyu+AkjTbgoZjxLD4iEnNRFBG8uaApprL6kKb2SyEj2xlOx6v/M9PLWf8aLHIoOwy2IdJp8ggeBgPHhzy58PxXAQlS/HZlXYnIWBtjiDGWgsAWQmCWtRl8JNZtS7lIiEEEmFRKLqWD158vx7f3GFPOCUQAb9tmjE0poVgpDUJhISYAtmqVtOzFMBQaqgdeHJ9HZSguxivHCE7a4d2Py+LFSkQK46yl1neNaYMYUK5ytl/4r1f/MdNZca/konj7spRXqLUju32wXFawekmGK7eVdNU0WVmcTJZnH2ucK8BJXUQ7eOvsiTEhZsZsUKVKyEzEiDAz5HLe5zocekCn+8B1ZhT3l+H55WCd26UIzeDnnHcHyoEFqe/D3wXDBxsCDppJzLdFGV9xUMERa21jbgtLSRnH2FVrfe+8e3jj9oxWTqPB8CFlSHrVfFkIEwKALPx+9hi7lv+vNgwiPfXmx+utXxj0UPU00eOHxhVEFhf24Tj//D0PWr5L/hW3gnqG1gnK1ZOjCZjahgoA+Wuje/EnVZXyme63+XEAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"data layer\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/b39469a6cc4b6e74a3741eeb1c86e81e/39c09/data-layer.png\\\"\\n        srcset=\\\"/static/b39469a6cc4b6e74a3741eeb1c86e81e/680fe/data-layer.png 156w,\\n/static/b39469a6cc4b6e74a3741eeb1c86e81e/17474/data-layer.png 312w,\\n/static/b39469a6cc4b6e74a3741eeb1c86e81e/39c09/data-layer.png 624w,\\n/static/b39469a6cc4b6e74a3741eeb1c86e81e/6d2da/data-layer.png 936w,\\n/static/b39469a6cc4b6e74a3741eeb1c86e81e/5a791/data-layer.png 1248w,\\n/static/b39469a6cc4b6e74a3741eeb1c86e81e/5df5d/data-layer.png 1572w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"解析数据源到数据层可以通过\", React.createElement(_components.strong, null, \"源插件\"), \"实现，官方约定源插件以 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-source-</code>\"\n    }\n  }), \" 开头。笔者现在想要将本地的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.mdx</code>\"\n    }\n  }), \" 文件解析到数据层，可以通过插件 \", React.createElement(_components.a, {\n    href: \"https://www.gatsbyjs.com/plugins/gatsby-source-filesystem/\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-source-filesystem</code>\"\n    }\n  })), \" 实现。编辑 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-config.ts</code>\"\n    }\n  }), \"，添加此插件并配置欲解析的本地目录：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token keyword\\\">type</span> <span class=\\\"token punctuation\\\">{</span> GatsbyConfig <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"gatsby\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> config<span class=\\\"token operator\\\">:</span> GatsbyConfig <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  plugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n      resolve<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"gatsby-source-filesystem\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 尽管官方文档在使用字符串时都使用的是反引号 `，但笔者更习惯使用单双引号</span>\\n      options<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        name<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"posts\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        path<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"path/to/posts/\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n      __key<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"posts\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> config<span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"上面的配置项表示插件将自动读取 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">path/to/posts/</code>\"\n    }\n  }), \" 目录下的文件信息。\"), \"\\n\", React.createElement(_components.p, null, \"但这还不够，源插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-source-filesystem</code>\"\n    }\n  }), \" 仅允许查询与文件相关的元数据，但是却无法读取文件包含的具体内容。为了读取到文件内容，就要用到\", React.createElement(_components.strong, null, \"转换器插件\"), \"。对于 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.mdx</code>\"\n    }\n  }), \" 格式的 File 节点，可以通过插件 \", React.createElement(_components.a, {\n    href: \"https://www.gatsbyjs.com/plugins/gatsby-plugin-mdx/\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-mdx</code>\"\n    }\n  })), \" 转换为 MDX 节点。官方文档里的这张图能直观描述这个过程：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/577b8e2bf994db9c7f6b2370764ce93d/5df5d/data-layer-with-nodes.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 80.76923076923077%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+0lEQVR42m1Ti44aMQzk//+rUn/gWlV3pdwBC8u+87TjPDpL4KDqRSZyTGZtjyebUkrOOaYsMdcFP113WM4l3cKlxnMpdcfa4Dca3l4M7OWw7HpnOe5Hd5yc9rLr7K+Tem11p0m58Naan40aNFFIN3BMaTF+NUvTosd5cSzGB8QpROXYkEhMyKxwwXjPEX/dwTG97/fH5iQiH/vD9s+OiLz3tSPrXC0TQSaqwfQJRg8wJDEUJmVdiLOl2XgckVY5siQwZb0PAgOyfm5T7sujslKcXxec98EdZjorbia/uHBNuOYkSTe6nsFISBz6cWzbi9JaG7t20l44yDwvl64fpxklgoovwJaiZRrcPHk1+AUdns9t1w8iIdkhmjHZMQv78Dmp58y8gkdaTqafSAF8ODYApxiLn4o+F90mIZL8BRj1WA6Og/IeOwUZF6UtwpEDM1IyhZWwdK/6znYVFsbrSGhtPoJbOI6CJeAiOmVJDGcd/xPb8JrTebt7Bx/1iDHHuCqBGTzjSHWwdf0755RA7zQvq6RFnHOCPkuBZqpUkAlB5odCHuB8X+DsOOgOY40JGuyUP03GXbU5O/7oFu3Xqm8P5ZkwHHvN37fTy1GhWzyy3xfzo9F4J7i+7e23txHKQbyU/+aMGK7hw9BQfY9wwjVShQVpgbMH16X8BUgLpATy0KryAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"data layer with nodes\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/577b8e2bf994db9c7f6b2370764ce93d/39c09/data-layer-with-nodes.png\\\"\\n        srcset=\\\"/static/577b8e2bf994db9c7f6b2370764ce93d/680fe/data-layer-with-nodes.png 156w,\\n/static/577b8e2bf994db9c7f6b2370764ce93d/17474/data-layer-with-nodes.png 312w,\\n/static/577b8e2bf994db9c7f6b2370764ce93d/39c09/data-layer-with-nodes.png 624w,\\n/static/577b8e2bf994db9c7f6b2370764ce93d/6d2da/data-layer-with-nodes.png 936w,\\n/static/577b8e2bf994db9c7f6b2370764ce93d/5a791/data-layer-with-nodes.png 1248w,\\n/static/577b8e2bf994db9c7f6b2370764ce93d/5df5d/data-layer-with-nodes.png 1572w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"继续配置 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-config.ts</code>\"\n    }\n  }), \" 如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> remarkGfm <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"remark-gfm\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> config<span class=\\\"token operator\\\">:</span> GatsbyConfig <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  plugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n      resolve<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"gatsby-source-filesystem\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token comment\\\">// ...</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n      resolve<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"gatsby-plugin-mdx\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      options<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        gatsbyRemarkPlugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n          <span class=\\\"token comment\\\">// 添加代码块高亮</span>\\n          <span class=\\\"token string\\\">\\\"gatsby-remark-prismjs\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        mdxOptions<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n          remarkPlugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token comment\\\">// 添加对 GitHub flavored markdown (GFM) 格式的支持</span>\\n            remarkGfm<span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"值得一提的是，由于 MDX 的语法与 Markdown 不同，它默认仅支持 CommonMark 格式，而某些非标准的 Markdown 功能如表格，需要单独配置插件启用。在上面的配置项里，笔者就引入了 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">remark-gfm</code>\"\n    }\n  }), \" 插件，它使得 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-mdx</code>\"\n    }\n  }), \" 能够解析 GFM 格式的语法。但是由于\", React.createElement(_components.a, {\n    href: \"https://github.com/gatsbyjs/gatsby/discussions/36406\"\n  }, \"兼容性问题\"), \"，经测试，目前的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-mdx@5.14.0</code>\"\n    }\n  }), \" 只能搭配旧版本的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">remark-gfm@^1.0.0</code>\"\n    }\n  }), \" 使用，不过也足够了。\"), \"\\n\", React.createElement(_components.p, null, \"官方教程在博客的 Frontmatter 中添加了 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">slug</code>\"\n    }\n  }), \" 属性来方便后续生成路由，但笔者更喜好 Hexo 那种文件路径驱动路由生成的模式。为此，可以在 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-node.ts</code>\"\n    }\n  }), \" 中导出 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">onCreateNode()</code>\"\n    }\n  }), \" 方法，对于每一个 MDX 节点，根据文件路径生成 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">slug</code>\"\n    }\n  }), \" 属性：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">type</span> <span class=\\\"token class-name\\\">CreateNodeArgs</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"gatsby\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">onCreateNode</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> node<span class=\\\"token punctuation\\\">,</span> actions <span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">:</span> CreateNodeArgs<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> createNodeField <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> actions<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>node<span class=\\\"token punctuation\\\">.</span>internal<span class=\\\"token punctuation\\\">.</span>type <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"Mdx\\\"</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">createNodeField</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n      node<span class=\\\"token punctuation\\\">,</span>\\n      name<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"slug\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      value<span class=\\\"token operator\\\">:</span> <span class=\\\"token function\\\">parseFilePathToPostSlug</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">String</span><span class=\\\"token punctuation\\\">(</span>node<span class=\\\"token punctuation\\\">.</span>internal<span class=\\\"token punctuation\\\">.</span>contentFilePath<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"假设撰写了如下的博客文章：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"md\\\"><pre class=\\\"language-md\\\"><code class=\\\"language-md\\\"><span class=\\\"token front-matter-block\\\"><span class=\\\"token punctuation\\\">---</span>\\n<span class=\\\"token front-matter yaml language-yaml\\\">title: 从同步 QQ 空间说说到前端呈现，我都做了些啥\\ndate: 2024-10-17\\nupdated: 2024-10-17\\ntimeliness: false\\ncategories:\\n  - 全栈开发\\ntags:\\n  - React\\n  - TypeScript\\n  - Node\\n  - ffmpeg</span>\\n<span class=\\\"token punctuation\\\">---</span></span>\\n\\n最近在捣腾我的 Timeline 时间线项目，希望将我在不同平台上的发言和活跃记录同步过来，在独立的站点上按照创建时间倒序呈现。\\n\\n...</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"访问本地的 GraphQL IDE 界面，查询到的 MDX 节点结果如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/c14cf24377cf3d19da98a9533309e740/7a626/query-mdx-nodes.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 48.71794871794871%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVR42o2R626bUBCE8yKVjMFuCJirL2AuMcaAMXeaWJHaP636/q8wHY5TKWqaqj9Gu1rpfGd2507WY8hGgrkeCckaqxYKfVL3cMwUnT9Ato5QnRRLVsU8YsG6tFL2CT7bJzhRB9MvcSevYszdHLM15Wail/iBYsRQrQiq8QiXs+BQIUp7nIoeQzuiuvQ4nzu09Yim6tG2z+ifvxNIVwv3jLmdYmYeIK0iSK8OZT3E7CGgkwN6Qr5eX/DtekXfDALa1AO6ZiSUlcAvLz8nYAjFyrBwCkhcUSLgtybYjLMFXRrbHHY0crUB5i6Hvslxz41UalrZ9C+on34QqAUCtlxf3gGlN0CNJ7GDFl4yYkW45RX8pBDgh3UGJ6jQCCBXVqyTOLSk+v8A8lHY8JY1XL/ANiwFVCNQewtUGIo8pWYzECb+d2AsHK73JcKkgcr+3rmt+87hBBSPtVsYHznUNxmMoId3fEKSNSiY8Clv4ceVANr7V+CfgI+A5q6AFfbYPnbwogrh4aZNUGJFl5PD+v+BMe92huldoHs19F0Jm/dzOJs09W5YC+Av1shKSXuzIpsAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"query mdx nodes\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/c14cf24377cf3d19da98a9533309e740/39c09/query-mdx-nodes.png\\\"\\n        srcset=\\\"/static/c14cf24377cf3d19da98a9533309e740/680fe/query-mdx-nodes.png 156w,\\n/static/c14cf24377cf3d19da98a9533309e740/17474/query-mdx-nodes.png 312w,\\n/static/c14cf24377cf3d19da98a9533309e740/39c09/query-mdx-nodes.png 624w,\\n/static/c14cf24377cf3d19da98a9533309e740/6d2da/query-mdx-nodes.png 936w,\\n/static/c14cf24377cf3d19da98a9533309e740/5a791/query-mdx-nodes.png 1248w,\\n/static/c14cf24377cf3d19da98a9533309e740/7a626/query-mdx-nodes.png 2165w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"截止目前，笔者完成了“解析数据源到数据层”这一阶段的工作，接下来就需要在组件读取这些 MDX 节点数据并展示了。\"), \"\\n\", React.createElement(_components.h3, null, \"渲染博客\"), \"\\n\", React.createElement(_components.p, null, \"Gatsby 的 GraphQL 数据层是它区别于其它前端框架的重要特性，尽管最终构建的产物仍是静态的前端页面，但在开发的过程中引入了这样的类似数据库的概念，体验仿似自己与自己握手，自己同自己进行数据传递。\"), \"\\n\", React.createElement(_components.p, null, \"如果想在 React 组件里消费数据层里准备好的数据，就需要编写对应的 GraphQL 查询代码：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token comment\\\">// src/hooks/useAllMdx.ts</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> graphql<span class=\\\"token punctuation\\\">,</span> useStaticQuery <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"gatsby\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">interface</span> <span class=\\\"token class-name\\\">MdxNode</span> <span class=\\\"token punctuation\\\">{</span>\\n  excerpt<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n  fields<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    slug<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n  frontmatter<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    categories<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    tags<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    title<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n    date<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n    updated<span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">useAllMdx</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>\\n    allMdx<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> nodes<span class=\\\"token operator\\\">:</span> posts <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token generic-function\\\"><span class=\\\"token function\\\">useStaticQuery</span><span class=\\\"token generic class-name\\\"><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token punctuation\\\">{</span>\\n    allMdx<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> nodes<span class=\\\"token operator\\\">:</span> MdxNode<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">></span></span></span><span class=\\\"token punctuation\\\">(</span>graphql<span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    query {\\n      allMdx(sort: { frontmatter: { date: DESC } }) {\\n        nodes {\\n          excerpt\\n          fields {\\n            slug\\n          }\\n          frontmatter {\\n            categories\\n            tags\\n            title\\n            date\\n            updated\\n          }\\n        }\\n      }\\n    }\\n  </span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> posts<span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> useAllMdx<span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"一个 React 组件里最多只能有 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">useStaticQuery()</code>\"\n    }\n  }), \" 方法，如果您想要查询多条不同数据，要么把查询代码写到一起，要么就新建一个钩子方法（推荐）。对于全局都会使用到的数据，可以分门别类放到不同的钩子方法里，例如网站的 Metadata，就可以把查询代码放在 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">src/hooks/useSiteMetadata.ts</code>\"\n    }\n  }), \" 里。\"), \"\\n\", React.createElement(_components.p, null, \"现在，笔者需要根据博客的文件路径，自动生成访问路由，例如对于博客文件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">path/to/this-is-a-blog.mdx</code>\"\n    }\n  }), \"，可以通过路由 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">/posts/this-is-a-blog</code>\"\n    }\n  }), \" 访问到，该怎么实现呢？官方提供了多种方案，这里笔者选择了更符合自己喜好的，在 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-node.ts</code>\"\n    }\n  }), \" 文件里导出 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">createPages()</code>\"\n    }\n  }), \" 方法的方案，它能够以编程的方式自定义生成路由，拥有相当大的自由度：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">type</span> <span class=\\\"token class-name\\\">CreatePagesArgs</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"gatsby\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> path <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"path\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> postTemplate <span class=\\\"token operator\\\">=</span> path<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"./src/templates/post.tsx\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">createPages</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">async</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  actions<span class=\\\"token punctuation\\\">,</span>\\n  graphql<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">:</span> CreatePagesArgs<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> data <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">await</span> <span class=\\\"token generic-function\\\"><span class=\\\"token function\\\">graphql</span><span class=\\\"token generic class-name\\\"><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token punctuation\\\">{</span>\\n    allMdx<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n      nodes<span class=\\\"token operator\\\">:</span> MdxNode<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">></span></span></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n    query {\\n      allMdx(\\n        sort: { frontmatter: { date: DESC } }\\n        filter: {\\n          internal: {\\n            contentFilePath: { regex: \\\"//blog/posts/|/blog/about-me.mdx/\\\" }\\n          }\\n        }\\n      ) {\\n        nodes {\\n          fields {\\n            slug\\n          }\\n          id\\n          internal {\\n            contentFilePath\\n          }\\n        }\\n      }\\n    }\\n  </span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  data<span class=\\\"token operator\\\">?.</span>allMdx<span class=\\\"token punctuation\\\">.</span>nodes<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>node<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> slug <span class=\\\"token operator\\\">=</span> node<span class=\\\"token punctuation\\\">.</span>fields<span class=\\\"token punctuation\\\">.</span>slug<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> path <span class=\\\"token operator\\\">=</span> slug <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"about-me\\\"</span> <span class=\\\"token operator\\\">?</span> <span class=\\\"token string\\\">\\\"/about-me\\\"</span> <span class=\\\"token operator\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">/posts/</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>slug<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n\\n    actions<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createPage</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n      path<span class=\\\"token punctuation\\\">,</span>\\n      component<span class=\\\"token operator\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>postTemplate<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token string\\\">?__contentFilePath=</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>node<span class=\\\"token punctuation\\\">.</span>internal<span class=\\\"token punctuation\\\">.</span>contentFilePath<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">,</span>\\n      context<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        id<span class=\\\"token operator\\\">:</span> node<span class=\\\"token punctuation\\\">.</span>id<span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"笔者就根据博客的路径，单独配置了“关于我”页面的路由。此外，笔者读取了 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">src/templates/post.tsx</code>\"\n    }\n  }), \" 文件作为生成路由的页面模板，并按照 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-mdx</code>\"\n    }\n  }), \" 推荐的方式，将 MDX 节点的文件路径作为了查询参数 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">__contentFilePath</code>\"\n    }\n  }), \" 的值，这样模板文件的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">props.children</code>\"\n    }\n  }), \" 将自动被替换为 MDX 节点包含内容的解析结果。另外，笔者向组件传递了 MDX 节点 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">id</code>\"\n    }\n  }), \" 作为上下文，为模板文件查询 MDX 节点详细信息提供了参数。\"), \"\\n\", React.createElement(_components.p, null, \"下面，编写模板文件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">src/templates/post.tsx</code>\"\n    }\n  }), \" 即可实现博客页面的展示了：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\"><pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> MDXProvider <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"@mdx-js/react\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> graphql<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">type</span> <span class=\\\"token class-name\\\">PageProps</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"gatsby\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token operator\\\">*</span> <span class=\\\"token keyword\\\">as</span> React <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"react\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">type</span> <span class=\\\"token class-name\\\">PostPageData</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  mdx<span class=\\\"token operator\\\">:</span> Pick<span class=\\\"token operator\\\">&lt;</span>MdxNode<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"frontmatter\\\"</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">type</span> <span class=\\\"token class-name\\\">PostPageContext</span> <span class=\\\"token operator\\\">=</span> Pick<span class=\\\"token operator\\\">&lt;</span>MdxNode<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> PostTemplate<span class=\\\"token operator\\\">:</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">FC</span><span class=\\\"token operator\\\">&lt;</span>PageProps<span class=\\\"token operator\\\">&lt;</span>PostPageData<span class=\\\"token punctuation\\\">,</span> PostPageContext<span class=\\\"token operator\\\">>></span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  children<span class=\\\"token punctuation\\\">,</span>\\n  data<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>\\n    mdx<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n      frontmatter<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> title<span class=\\\"token punctuation\\\">,</span> date<span class=\\\"token punctuation\\\">,</span> updated<span class=\\\"token punctuation\\\">,</span> categories<span class=\\\"token punctuation\\\">,</span> tags <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> data<span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>h1</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>title<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>h1</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>article</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n        </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">MDXProvider</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">MDXProvider</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>article</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> query <span class=\\\"token operator\\\">=</span> graphql<span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n  query ($id: String!) {\\n    mdx(id: { eq: $id }) {\\n      frontmatter {\\n        categories\\n        tags\\n        title\\n        date\\n        updated\\n      }\\n    }\\n  }\\n</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> PostTemplate<span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"通过上面导出的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">query</code>\"\n    }\n  }), \" 静态查询字符串，Gatsby 将查询数据层里 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">mdx.id === props.pageContext.id</code>\"\n    }\n  }), \" 的 MDX 节点的指定属性，并把结果传递给 React 组件的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">props.data</code>\"\n    }\n  }), \"。\"), \"\\n\", React.createElement(_components.p, null, \"这样，“组件从数据层查询”这一阶段的工作也完成了，剩下的就是慢慢优化页面逻辑和展示效果了！\"), \"\\n\", React.createElement(_components.h3, null, \"添加自定义组件\"), \"\\n\", React.createElement(_components.p, null, \"MDX 格式的博客相比 MD 格式的最大优势在于能够使用自定义的 React 组件：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\"><pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token keyword\\\">type</span> <span class=\\\"token class-name\\\">MDXProps</span> <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"mdx/types\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">import</span> Card <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"path/to/components/card\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> components<span class=\\\"token operator\\\">:</span> MDXProps<span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"components\\\"</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  Card<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">PostTemplate</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> children <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>article</span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">MDXProvider</span></span> <span class=\\\"token attr-name\\\">components</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>components<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">MDXProvider</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>article</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"现在，在编写 MDX 博客文件的时候，就可以像使用 JSX 一样使用 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">&lt;Card></code>\"\n    }\n  }), \" 组件了！\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/978b22fece05e0e70a27935928fa8ea9/59000/card.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 37.17948717948718%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABLElEQVR42n2RSW/CMBCF+QFIWchiZ1EUIg4cEqBZCMoCBE78i0a99dD/f3r1TKmFVKmHT7bG4+f3xgvXdbHdbtG2LaZpQpHn6Psep9MJt9sN9/sduap1Xcc9RBiG8DwPvu//YUEHcRxDCMFNUkqkacqs12tkWYYkSXSNCIKA+14RChYkISEFrpcr5nlGW5ZY2TZM09RYlqVXwzBgq3PCcRyGjahHtKAMJMd8PB5K+IJhGDgaxTwejzgcDno9n89cp5FUVYWiKDiBFvSfgqVyRpd2ux32+z031nXNF5um4XMSHMeRH29UL40kUuPi2K8OadN9faD9fIexXOpI1m/kZ1zbUqNQkU3jp+asVqBP9RRkyhfkUImR+qYpsaneIMMAQRz9Q6z3MgpfiNjhN59yxQs9gm7xAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"card\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/978b22fece05e0e70a27935928fa8ea9/39c09/card.png\\\"\\n        srcset=\\\"/static/978b22fece05e0e70a27935928fa8ea9/680fe/card.png 156w,\\n/static/978b22fece05e0e70a27935928fa8ea9/17474/card.png 312w,\\n/static/978b22fece05e0e70a27935928fa8ea9/39c09/card.png 624w,\\n/static/978b22fece05e0e70a27935928fa8ea9/59000/card.png 917w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"另外，还可以自定义现有标签渲染的结果。例如想要为图片文件添加 FancyBox 的支持，可以编写代码如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\"><pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> Fancybox <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"@fancyapps/ui\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">FancyBoxImage</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>props<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> alt<span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span><span class=\\\"token punctuation\\\">;</span> src<span class=\\\"token operator\\\">?</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token builtin\\\">string</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>\\n    alt <span class=\\\"token operator\\\">=</span> <span class=\\\"token string\\\">\\\"The author is too lazy to give an alt\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    src<span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token operator\\\">...</span>restProps\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> props<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>a</span> <span class=\\\"token attr-name\\\">href</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>src<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">data-fancybox</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation attr-equals\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>gallery<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token attr-name\\\">data-caption</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>alt<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>src<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>alt<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token spread\\\"><span class=\\\"token punctuation\\\">{</span><span class=\\\"token operator\\\">...</span>restProps<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>a</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> components<span class=\\\"token operator\\\">:</span> MDXProps<span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"components\\\"</span><span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  img<span class=\\\"token operator\\\">:</span> FancyBoxImage<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">PostTemplate</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> children <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> articleRef <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token generic-function\\\"><span class=\\\"token function\\\">useRef</span><span class=\\\"token generic class-name\\\"><span class=\\\"token operator\\\">&lt;</span>HTMLElement<span class=\\\"token operator\\\">></span></span></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useEffect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">Fancybox</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">bind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"[data-fancybox]\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> Fancybox<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">unbind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"[data-fancybox]\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>article</span> <span class=\\\"token attr-name\\\">ref</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>articleRef<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">MDXProvider</span></span> <span class=\\\"token attr-name\\\">components</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>components<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">MDXProvider</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>article</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"MDX 渲染得到的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">&lt;img></code>\"\n    }\n  }), \" 组件将自动被替换为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">&lt;FancyBoxImage></code>\"\n    }\n  }), \" 组件，随后正确地被 FancyBox 绑定。\"), \"\\n\", React.createElement(_components.h3, null, \"静态资源的访问与优化\"), \"\\n\", React.createElement(_components.p, null, \"使用插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-remark-images</code>\"\n    }\n  }), \"，Gatsby 将自动压缩博客中使用到的本地图片，减少流量压力，同时生成占位图片，避免博客高度突然变化，提升阅读体验。处理后的图片资源将自动生成到 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">public</code>\"\n    }\n  }), \" 的对应目录下，确保能被正确地访问。在 Gatsby 的最佳实践中，应当始终使用类似 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-remark-images</code>\"\n    }\n  }), \" 插件的方案来优化图片类型的静态资源。\"), \"\\n\", React.createElement(_components.p, null, \"结合插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-mdx</code>\"\n    }\n  }), \" 使用，可以配置如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">const</span> config<span class=\\\"token operator\\\">:</span> GatsbyConfig <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  plugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token string\\\">\\\"gatsby-plugin-sharp\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n      resolve<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"gatsby-plugin-mdx\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      options<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        gatsbyRemarkPlugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n          <span class=\\\"token punctuation\\\">{</span>\\n            resolve<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"gatsby-remark-images\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            options<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n              maxWidth<span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">624</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token string\\\">\\\"gatsby-remark-copy-linked-files\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"其中，\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-sharp</code>\"\n    }\n  }), \" 是插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-remark-images</code>\"\n    }\n  }), \" 的必要依赖，需要添加到插件列表中。\"), \"\\n\", React.createElement(_components.p, null, \"需要留意的是：插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-remark-images</code>\"\n    }\n  }), \" 仅支持压缩、处理部分的图片格式如 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.jpeg</code>\"\n    }\n  }), \"。其它的格式如 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.gif</code>\"\n    }\n  }), \" 则需要插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-remark-copy-linked-files</code>\"\n    }\n  }), \" 帮助，原封不动地移动到 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">public</code>\"\n    }\n  }), \" 里的对应目录。协同使用这两个插件即可达成最好的静态资源访问效果。\"), \"\\n\", React.createElement(_components.p, null, \"由于 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-remark-images</code>\"\n    }\n  }), \" 会相应地封装 MDX 渲染结果里的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">&lt;img></code>\"\n    }\n  }), \" 标签，为了兼容 FancyBox 能力，可以编写 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">useEffect()</code>\"\n    }\n  }), \" 钩子方法如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\"><pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">PostTemplate</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> children <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> articleRef <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token generic-function\\\"><span class=\\\"token function\\\">useRef</span><span class=\\\"token generic class-name\\\"><span class=\\\"token operator\\\">&lt;</span>HTMLElement<span class=\\\"token operator\\\">></span></span></span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useEffect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> optimizedImageLinks <span class=\\\"token operator\\\">=</span>\\n      articleRef<span class=\\\"token punctuation\\\">.</span>current<span class=\\\"token operator\\\">?.</span><span class=\\\"token generic-function\\\"><span class=\\\"token function\\\">querySelectorAll</span><span class=\\\"token generic class-name\\\"><span class=\\\"token operator\\\">&lt;</span>HTMLLinkElement<span class=\\\"token operator\\\">></span></span></span><span class=\\\"token punctuation\\\">(</span>\\n        <span class=\\\"token string\\\">\\\"a.gatsby-resp-image-link\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    optimizedImageLinks<span class=\\\"token operator\\\">?.</span><span class=\\\"token function\\\">forEach</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span>link<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">const</span> image <span class=\\\"token operator\\\">=</span> link<span class=\\\"token punctuation\\\">.</span>children<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">item</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token keyword\\\">as</span> HTMLImageElement<span class=\\\"token punctuation\\\">;</span>\\n      link<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setAttribute</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"data-fancybox\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"gallery\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      link<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setAttribute</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"data-caption\\\"</span><span class=\\\"token punctuation\\\">,</span> image<span class=\\\"token punctuation\\\">.</span>alt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n    <span class=\\\"token function\\\">Fancybox</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">bind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"[data-fancybox]\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> Fancybox<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">unbind</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"[data-fancybox]\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>article</span> <span class=\\\"token attr-name\\\">ref</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>articleRef<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">MDXProvider</span></span> <span class=\\\"token attr-name\\\">components</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>components<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">MDXProvider</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>article</span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"博客搜索\"), \"\\n\", React.createElement(_components.p, null, \"笔者基于 Algolia 实现博客搜索的能力，插件 \", React.createElement(_components.a, {\n    href: \"https://www.gatsbyjs.com/plugins/gatsby-plugin-algolia/\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-algolia</code>\"\n    }\n  })), \" 能帮助项目快速实现索引数据并上传的功能。\"), \"\\n\", React.createElement(_components.p, null, \"在 Algolia 控制台创建索引并获取密钥等的操作不再冗述，将这些值塞到环境变量里即可被 Gatsby 访问：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\"><pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token comment\\\"># 包含 GATSBY_ 前缀的环境变量将暴露到客户端环境中</span>\\n<span class=\\\"token comment\\\"># 后续将用到下面三个变量实现客户端检索功能</span>\\n<span class=\\\"token assign-left variable\\\">GATSBY_ALGOLIA_APP_ID</span><span class=\\\"token operator\\\">=</span>YOUR_ALGOLIA_APP_ID\\n<span class=\\\"token assign-left variable\\\">GATSBY_ALGOLIA_API_PUBLIC_KEY</span><span class=\\\"token operator\\\">=</span>YOUR_ALGOLIA_API_PUBLIC_KEY\\n<span class=\\\"token assign-left variable\\\">GATSBY_ALGOLIA_INDEX_NAME</span><span class=\\\"token operator\\\">=</span>YOUR_ALGOLIA_INDEX_NAME\\n<span class=\\\"token comment\\\"># 用于上传数据等的 Algolia 管理秘钥切勿添加 GATSBY_ 前缀</span>\\n<span class=\\\"token assign-left variable\\\">ALGOLIA_API_KEY</span><span class=\\\"token operator\\\">=</span>YOUR_ALGOLIA_API_PRIVATE_KEY</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"为了上传用于检索的博客元数据到 Algolia，可以像这么配置 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-config.ts</code>\"\n    }\n  }), \"：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> dotenv <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"dotenv\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\ndotenv<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">config</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  path<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\".env\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">.env.</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">NODE_ENV</span><span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> config<span class=\\\"token operator\\\">:</span> GatsbyConfig <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  plugins<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token comment\\\">// ... 其它的插件</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token comment\\\">// 应当将 gatsby-plugin-algolia 插件放到列表的最后</span>\\n      <span class=\\\"token comment\\\">// 确保 GraphQL 查询到的结果是经过其它插件处理后的最终结果</span>\\n      resolve<span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"gatsby-plugin-algolia\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n      options<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        appId<span class=\\\"token operator\\\">:</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">GATSBY_ALGOLIA_APP_ID</span><span class=\\\"token punctuation\\\">,</span>\\n        apiKey<span class=\\\"token operator\\\">:</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">ALGOLIA_API_KEY</span><span class=\\\"token punctuation\\\">,</span>\\n        indexName<span class=\\\"token operator\\\">:</span> process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">GATSBY_ALGOLIA_INDEX_NAME</span><span class=\\\"token punctuation\\\">,</span>\\n        queries<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n          <span class=\\\"token punctuation\\\">{</span>\\n            query<span class=\\\"token operator\\\">:</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">\\n              query {\\n                allMdx(\\n                  filter: {\\n                    internal: {\\n                      contentFilePath: { regex: \\\"//blog/posts//\\\" }\\n                    }\\n                  }\\n                ) {\\n                  nodes {\\n                    excerpt(pruneLength: 200)\\n                    fields {\\n                      slug\\n                    }\\n                    frontmatter {\\n                      categories\\n                      tags\\n                      title\\n                      date\\n                      updated\\n                      timeliness\\n                    }\\n                    id\\n                    internal {\\n                      contentDigest\\n                    }\\n                  }\\n                }\\n              }</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token function-variable function\\\">transformer</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n              data<span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n              data<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                allMdx<span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                  nodes<span class=\\\"token operator\\\">:</span> MdxNode<span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n                <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n              <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> data<span class=\\\"token punctuation\\\">.</span>allMdx<span class=\\\"token punctuation\\\">.</span>nodes<span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-plugin-algolia</code>\"\n    }\n  }), \" 需要一个包含博客元数据的数组以执行上传操作，而 GraphQL 查询的结果是一个形如 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">{ addMdx: { nodes: MdxNode[] }}</code>\"\n    }\n  }), \" 的对象，因此要使用插件提供的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">transformer()</code>\"\n    }\n  }), \" 方法，返回里面的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">nodes</code>\"\n    }\n  }), \" 数组。\"), \"\\n\", React.createElement(_components.p, null, \"为了确保博客在索引里的唯一性，并确保索引里的数据始终最新，在 GraphQL 查询的时候必须提供 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">id</code>\"\n    }\n  }), \" 和 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">internal.contentDigest</code>\"\n    }\n  }), \"。\"), \"\\n\", React.createElement(_components.p, null, \"这样，当执行构建操作时，插件将自动把查询得到的博客元数据上传到指定的 Algolia 索引中去。登录 Algolia 控制台，即可查看上传的结果啦：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/b9a90ce7a2905fce114512d4d6c78e1e/8733b/algolia-index-item.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 61.53846153846154%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVR42qWS627CMAyF+/6PuDGuY6XlVkqTNGmTMx+HIn4whDRLVuI0/mKfurDWwxqHEEYYG3C9WhiJxzFiGOJ9nfaTM7Z638G5oO79gIKgvueBV+/lkLH3QfYjXJ+Tgzj31uWVeRPo0lo5G/SsGAYCCevlxT7DJSbQ9lK1S4hj0qqMwDqTdGU15na/aSzYaQhS4dRCSrhbkqBtO/AxPtKKDO01CMCj65xUHhBjRJR7MaabDHktMuyBRqD4MI6auFrVWG8OmG8clpsG2+1R4j1W6z12uwZV1WjbbJePKPCZUQJqulhWmH2VmC9KfAtsta7x8fmDz1mp3+aLSmG0e4XPLKWoOpblCVXdoK4v2O9bHA4tyt0Zx+NVNaR2E+PPCkdp93g6a5UUndq1HA8bVHgmUt/JJ8leAo2x8CHPGceCzn1zMfpjCM7+BpBmjEHweT6NYaWDroTpuPg8yI/5L4HvGseGYO9vf5ka8PA/zrbp/Mu/ivqrJqdvyOAAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"algolia index item\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/b9a90ce7a2905fce114512d4d6c78e1e/39c09/algolia-index-item.png\\\"\\n        srcset=\\\"/static/b9a90ce7a2905fce114512d4d6c78e1e/680fe/algolia-index-item.png 156w,\\n/static/b9a90ce7a2905fce114512d4d6c78e1e/17474/algolia-index-item.png 312w,\\n/static/b9a90ce7a2905fce114512d4d6c78e1e/39c09/algolia-index-item.png 624w,\\n/static/b9a90ce7a2905fce114512d4d6c78e1e/6d2da/algolia-index-item.png 936w,\\n/static/b9a90ce7a2905fce114512d4d6c78e1e/5a791/algolia-index-item.png 1248w,\\n/static/b9a90ce7a2905fce114512d4d6c78e1e/8733b/algolia-index-item.png 1495w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"客户端搜索博客的功能可以基于 Algolia 提供的前端组件实现，笔者实现的一个简单的例子是：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"tsx\\\"><pre class=\\\"language-tsx\\\"><code class=\\\"language-tsx\\\"><span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> liteClient <span class=\\\"token keyword\\\">as</span> algoliasearch <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"algoliasearch/lite\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span>\\n  Configure<span class=\\\"token punctuation\\\">,</span>\\n  Hits<span class=\\\"token punctuation\\\">,</span>\\n  InstantSearch<span class=\\\"token punctuation\\\">,</span>\\n  Pagination<span class=\\\"token punctuation\\\">,</span>\\n  SearchBox<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"react-instantsearch\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">import</span> Post <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"path/to/post\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> searchClient <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">algoliasearch</span><span class=\\\"token punctuation\\\">(</span>\\n  <span class=\\\"token function\\\">String</span><span class=\\\"token punctuation\\\">(</span>process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">GATSBY_ALGOLIA_APP_ID</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token function\\\">String</span><span class=\\\"token punctuation\\\">(</span>process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">GATSBY_ALGOLIA_API_PUBLIC_KEY</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">Hit</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> hit <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Post</span></span> <span class=\\\"token attr-name\\\">post</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>hit<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">AlgoliaSearch</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">InstantSearch</span></span>\\n      <span class=\\\"token attr-name\\\">insights</span>\\n      <span class=\\\"token attr-name\\\">searchClient</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>searchClient<span class=\\\"token punctuation\\\">}</span></span>\\n      <span class=\\\"token attr-name\\\">indexName</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>process<span class=\\\"token punctuation\\\">.</span>env<span class=\\\"token punctuation\\\">.</span><span class=\\\"token constant\\\">GATSBY_ALGOLIA_INDEX_NAME</span><span class=\\\"token punctuation\\\">}</span></span>\\n    <span class=\\\"token punctuation\\\">></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Configure</span></span> <span class=\\\"token attr-name\\\">hitsPerPage</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token number\\\">10</span><span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token plain-text\\\">\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">SearchBox</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token plain-text\\\">\\n      &lt;Hits&lt;AlgoliaPostItem> hitComponent=</span><span class=\\\"token punctuation\\\">{</span>Hit<span class=\\\"token punctuation\\\">}</span><span class=\\\"token plain-text\\\"> />\\n      </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">Pagination</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token plain-text\\\">\\n    </span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">InstantSearch</span></span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> AlgoliaSearch<span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"这样，客户端的博客搜索能力就实现了：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/70f0e1ff11fc4a56a7171d1438a51aa9/ecf19/algolia-search-item.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 84.61538461538461%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACAklEQVR42q1U2W7iUAzNNwBZWEPKAAOBAalsIYBIgYJEGiqGpSAhIfWhH9CX/v2Za5eEULUjKvXhyPGNc+xjO1dKJBKoVqtoNBpsS6USyuXyp6hUKjBN8wzhl8omdD2DbDaLdDoNiQhHoxHW6zUcx0Gn00G3270CFmy7h7ZlI5//xQmSySSkeDwORVEQi8UuEI1G+VyWZfbJapoGir+EBlVVOZZ8iYLa7TbDMLIoFEzc3PwREqvCGiJ7ntuQy+WCxH6S9+d3q8gKSK1EZc5mMywWHlx3gednD29vI7y87Nifz+fcjs1mwz0mYkKxWMRvgUK+wHINw0AiLghTqRT6/T7u7hxBusJud4vXV1mQ9LFcbnF/P8F0OsV4PMZwOGTreZ6IXYj3S6xWK3Rtm5UEkgeDgQicYDIZ4+HhryB5wuPjWpCusN1ucTgcsN/v0ev1WMnxeGQiqpxIXddFrVbjXjJhs9lk2VSp4wxFgq5Yo1uePk2eYFkW95msLSqq1+u8Rq1WiwvKZDJnQuojSac9omeCrut85oMaH4lEePoEmQZy2gaCKgaWpKEQIU0tDH9dwqDsFBtA+Kp2PqP3QQ/J+Ql8m/Ciwg/VauppD79D6P8dPpH/HE74o5KvJvQH86XkE0dwOfwvkEC/FSEs9eN3VxNSIO0k3Xf+vvqWhhC+eWgo/wABDONIrY6JVQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"algolia search item\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/70f0e1ff11fc4a56a7171d1438a51aa9/39c09/algolia-search-item.png\\\"\\n        srcset=\\\"/static/70f0e1ff11fc4a56a7171d1438a51aa9/680fe/algolia-search-item.png 156w,\\n/static/70f0e1ff11fc4a56a7171d1438a51aa9/17474/algolia-search-item.png 312w,\\n/static/70f0e1ff11fc4a56a7171d1438a51aa9/39c09/algolia-search-item.png 624w,\\n/static/70f0e1ff11fc4a56a7171d1438a51aa9/6d2da/algolia-search-item.png 936w,\\n/static/70f0e1ff11fc4a56a7171d1438a51aa9/ecf19/algolia-search-item.png 948w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"路由切换体验优化\"), \"\\n\", React.createElement(_components.p, null, \"有的时候切换路由可能需要几秒钟时间处理，用户看不到页面切换的结果可能会非常焦虑。为了缓解这种焦虑，在库 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">nprogress</code>\"\n    }\n  }), \" 的帮助下，笔者添加了可视化的进度条。\"), \"\\n\", React.createElement(_components.p, null, \"这一切非常简单，只需要在 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gatsby-browser.ts</code>\"\n    }\n  }), \" 文件导出两个生命周期钩子方法即可：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ts\\\"><pre class=\\\"language-ts\\\"><code class=\\\"language-ts\\\"><span class=\\\"token keyword\\\">import</span> nProgress <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"nprogress\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">onRouteUpdateDelayed</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  nProgress<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">start</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">onRouteUpdate</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  nProgress<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">done</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"上面的代码表示，当路由切换耗时大于 1 秒时，显示进度条。当路由切换完成时，隐藏进度条。\"), \"\\n\", React.createElement(_components.p, null, \"当然，别忘了引入 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">nprogress</code>\"\n    }\n  }), \" 的样式文件，如果希望，还可以修改一下进度条的颜色。\"), \"\\n\", React.createElement(_components.h2, null, \"持续部署\"), \"\\n\", React.createElement(_components.p, null, \"笔者基于 Github Workflow 实现项目的持续集成与持续部署，可以编写工作流文件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.github/workflows/deployment.yml</code>\"\n    }\n  }), \" 如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"yml\\\"><pre class=\\\"language-yml\\\"><code class=\\\"language-yml\\\"><span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Blog System CI &amp; CD\\n\\n<span class=\\\"token key atrule\\\">on</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">push</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">branches</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token punctuation\\\">-</span> main\\n\\n<span class=\\\"token key atrule\\\">jobs</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">pages</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">runs-on</span><span class=\\\"token punctuation\\\">:</span> ubuntu<span class=\\\"token punctuation\\\">-</span>latest\\n\\n    <span class=\\\"token key atrule\\\">steps</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Checkout code\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> actions/checkout@v4\\n\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Use Node.js 20.x\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> actions/setup<span class=\\\"token punctuation\\\">-</span>node@v4\\n        <span class=\\\"token key atrule\\\">with</span><span class=\\\"token punctuation\\\">:</span>\\n          <span class=\\\"token key atrule\\\">node-version</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">20</span>\\n          <span class=\\\"token key atrule\\\">cache</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"yarn\\\"</span>\\n\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Cache Yarn dependencies\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> actions/cache@v4\\n        <span class=\\\"token key atrule\\\">id</span><span class=\\\"token punctuation\\\">:</span> yarn<span class=\\\"token punctuation\\\">-</span>cache\\n        <span class=\\\"token key atrule\\\">with</span><span class=\\\"token punctuation\\\">:</span>\\n          <span class=\\\"token key atrule\\\">path</span><span class=\\\"token punctuation\\\">:</span> node_modules\\n          <span class=\\\"token key atrule\\\">key</span><span class=\\\"token punctuation\\\">:</span> $<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> runner.os <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">-</span>yarn<span class=\\\"token punctuation\\\">-</span>$<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> hashFiles('<span class=\\\"token important\\\">**/yarn.lock')</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span>\\n          <span class=\\\"token key atrule\\\">restore-keys</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">|</span><span class=\\\"token scalar string\\\">\\n            ${{ runner.os }}-yarn-</span>\\n\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Install dependencies\\n        <span class=\\\"token key atrule\\\">run</span><span class=\\\"token punctuation\\\">:</span> yarn install <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>immutable\\n\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Build Gatsby\\n        <span class=\\\"token key atrule\\\">run</span><span class=\\\"token punctuation\\\">:</span> yarn build\\n\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Deploy\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> peaceiris/actions<span class=\\\"token punctuation\\\">-</span>gh<span class=\\\"token punctuation\\\">-</span>pages@v4\\n        <span class=\\\"token key atrule\\\">with</span><span class=\\\"token punctuation\\\">:</span>\\n          <span class=\\\"token key atrule\\\">personal_token</span><span class=\\\"token punctuation\\\">:</span> $<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> secrets.PERSONAL_ACCESS_TOKEN <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span> <span class=\\\"token comment\\\"># 笔者将产物推送到了外部仓库，因此这里使用到了 Github 私人密钥</span>\\n          <span class=\\\"token key atrule\\\">publish_dir</span><span class=\\\"token punctuation\\\">:</span> ./public\\n          <span class=\\\"token key atrule\\\">external_repository</span><span class=\\\"token punctuation\\\">:</span> LolipopJ/LolipopJ.github.io\\n          <span class=\\\"token key atrule\\\">publish_branch</span><span class=\\\"token punctuation\\\">:</span> main</code></pre></div>\"\n    }\n  }));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/homepage/homepage/blog/posts/build-my-gatsby-blog.mdx\";\nimport {Fancybox} from \"@fancyapps/ui\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport dayjs from \"dayjs\";\nimport {Link} from \"gatsby\";\nimport * as React from \"react\";\nimport Card from \"../components/card\";\nimport Category from \"../components/category\";\nimport SEO from \"../components/seo\";\nimport Tag from \"../components/tag\";\nconst FancyBoxImage = props => {\n  const {alt = \"The author is too lazy to give an alt\", src, ...restProps} = props;\n  return React.createElement(\"a\", {\n    href: src,\n    \"data-fancybox\": \"gallery\",\n    \"data-caption\": alt\n  }, React.createElement(\"img\", Object.assign({\n    src: src,\n    alt: alt\n  }, restProps)));\n};\nconst ALink = _ref => {\n  let {href = \"\", children} = _ref;\n  const isExternalHref = !(href !== null && href !== void 0 && href.startsWith(\"#\"));\n  const parsedHref = isExternalHref ? href : `#${encodeURIComponent(href.slice(1))}`;\n  return React.createElement(\"a\", {\n    href: parsedHref,\n    target: isExternalHref ? \"_blank\" : undefined,\n    rel: \"noreferrer\"\n  }, children);\n};\nconst components = {\n  a: ALink,\n  img: FancyBoxImage,\n  Card,\n  Link\n};\nconst PostTemplate = _ref2 => {\n  let {children, data} = _ref2;\n  const {mdx: {frontmatter: {title, date: dateString, updated: updatedDateString, categories, tags, timeliness = true}}} = data;\n  const articleRef = React.useRef(null);\n  const date = dayjs(dateString);\n  const updatedDate = updatedDateString ? dayjs(updatedDateString) : date;\n  const today = dayjs();\n  const diffDays = today.diff(updatedDate, \"days\");\n  React.useEffect(() => {\n    var _articleRef$current;\n    const optimizedImageLinks = (_articleRef$current = articleRef.current) === null || _articleRef$current === void 0 ? void 0 : _articleRef$current.querySelectorAll(\"a.gatsby-resp-image-link\");\n    optimizedImageLinks === null || optimizedImageLinks === void 0 ? void 0 : optimizedImageLinks.forEach(link => {\n      const image = link.children.item(1);\n      link.setAttribute(\"data-fancybox\", \"gallery\");\n      link.setAttribute(\"data-caption\", image.alt);\n    });\n    Fancybox.bind(\"[data-fancybox]\");\n    return () => Fancybox.unbind(\"[data-fancybox]\");\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"mx-auto flex max-w-xl flex-col gap-y-12\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col gap-4\"\n  }, (categories === null || categories === void 0 ? void 0 : categories.length) && React.createElement(Category, {\n    name: categories[0],\n    className: \"item-selectable\"\n  }), React.createElement(\"h1\", {\n    className: \"text-3xl font-bold\"\n  }, title), React.createElement(\"div\", {\n    className: \"item-secondary flex flex-col gap-2 lg:flex-row\"\n  }, dateString && React.createElement(\"span\", {\n    title: `首次发布于：${date.toString()}\\n最后更新于：${updatedDate.toString()}`\n  }, date.format(\"MM 月 DD 日 YYYY 年\")), (tags === null || tags === void 0 ? void 0 : tags.length) && React.createElement(\"div\", {\n    className: \"flex flex-1 flex-wrap gap-2 lg:before:content-['\\u2022']\"\n  }, tags.map(tag => React.createElement(Tag, {\n    key: tag,\n    name: tag,\n    className: \"item-secondary item-selectable\"\n  }))))), React.createElement(\"article\", {\n    ref: articleRef,\n    className: \"heti post-entry\"\n  }, timeliness && diffDays > 365 && React.createElement(\"blockquote\", {\n    className: \"border-l-4 border-orange-400\"\n  }, \"\\u8FD9\\u662F\\u4E00\\u7BC7\", React.createElement(\"strong\", null, \"\\u6700\\u540E\\u66F4\\u65B0\\u4E8E \", diffDays, \" \\u5929\\u524D\"), \"\\u7684\\u535A\\u5BA2\\uFF0C\\u5185\\u5BB9\\u53EF\\u80FD\\u968F\\u7740\\u65F6\\u95F4\\u7684\\u63A8\\u79FB\\u800C\\u53D8\\u5F97\\u4E0D\\u518D\\u9002\\u7528\\uFF0C\\u5EFA\\u8BAE\\u60A8\\u4ED4\\u7EC6\\u8BC4\\u4F30\\u4FE1\\u606F\\u7684\\u6709\\u6548\\u6027\\u3002\"), React.createElement(MDXProvider, {\n    components: components\n  }, children)));\n};\nconst query = \"2697480803\";\nexport const Head = _ref3 => {\n  let {data} = _ref3;\n  return React.createElement(SEO, {\n    title: String(data.mdx.frontmatter.title)\n  });\n};\nPostTemplate\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","h2","p","a","span","ul","li","h3","strong","_provideComponents","components","Link","id","component","Error","_missingMdxReference","React","to","href","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","_ref","children","isExternalHref","startsWith","parsedHref","encodeURIComponent","slice","target","undefined","rel","img","alt","src","restProps","Card","PostTemplate","_ref2","data","mdx","frontmatter","title","date","dateString","updated","updatedDateString","categories","tags","timeliness","articleRef","dayjs","updatedDate","diffDays","diff","_articleRef$current","optimizedImageLinks","current","querySelectorAll","forEach","link","image","item","setAttribute","Fancybox","bind","unbind","className","length","Category","name","toString","format","map","tag","Tag","key","ref","MDXProvider","Head","_ref3","SEO","String","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}