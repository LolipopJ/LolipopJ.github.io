{"version":3,"file":"component---src-templates-post-tsx-content-file-path-blog-posts-amap-import-vue-mdx-3ca1c9f8e3d483e283bb.js","mappings":"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","sources":["webpack://homepage/./blog/posts/amap-import-vue.mdx","webpack://homepage/./src/templates/post.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    span: \"span\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\"\n  }, _provideComponents(), props.components), {Link} = _components;\n  if (!Link) _missingMdxReference(\"Link\", true);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"迷途知反！腾讯地图的 JS API 文档实在过于简陋，且库很久没有更新，转身投入高德地图的怀抱，享受 this moment 的美好！\"), \"\\n\", React.createElement(_components.h2, null, \"高德地图与腾讯地图定位功能区别\"), \"\\n\", React.createElement(_components.p, null, \"高德地图将定位功能和逆地理编码功能分开为两个操作，而腾讯地图将二者合并。\"), \"\\n\", React.createElement(_components.p, null, \"这意味着使用高德地图实现逆地理编码，首先需要执行定位操作，再将得到的结果传给逆地理编码插件获得最后的结果。\"), \"\\n\", React.createElement(_components.p, null, \"此外，高德地图的逆地理编码无法解析中国以外的地理坐标，只能解析中国境内省市区等地理坐标。\"), \"\\n\", React.createElement(_components.h2, null, \"引入高德地图 JS API 库\"), \"\\n\", React.createElement(_components.p, null, \"这里我们通过顺序同步加载的方式引入第三方库。\"), \"\\n\", React.createElement(_components.p, null, \"编辑 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">nuxt.config.js</code>\"\n    }\n  }), \" 中 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">head</code>\"\n    }\n  }), \" 项以引入 JS API 库。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// nuxt.config.js</span>\\n<span class=\\\"token literal-property property\\\">script</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n  <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token literal-property property\\\">type</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">'text/javascript'</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token comment\\\">// 引入高德地图 JavaScript API：https://developer.amap.com/api/jsapi-v2/guide/abc/load</span>\\n    <span class=\\\"token comment\\\">// YOUR-APP-KEY 即高德位置服务应用的 key</span>\\n    <span class=\\\"token comment\\\">// AMap.Geolocation 为定位插件</span>\\n    <span class=\\\"token comment\\\">// AMap.Geocoder 为逆地理编码插件</span>\\n    <span class=\\\"token literal-property property\\\">src</span><span class=\\\"token operator\\\">:</span>\\n      <span class=\\\"token string\\\">'https://webapi.amap.com/maps?v=2.0&amp;key=YOUR-APP-KEY&amp;plugin=AMap.Geolocation,AMap.Geocoder'</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"如果获取脚本失败，请关闭浏览器中拦截广告的插件等。\"), \"\\n\", React.createElement(_components.p, null, \"此外要注意：\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"为避免地图数据协议和前端资源不匹配导致页面运行报错，只允许在线加载 JS API，禁止进行本地转存、与其它代码混合打包等用法。——\", React.createElement(_components.a, {\n    href: \"https://developer.amap.com/api/javascript-api/guide/abc/load\"\n  }, \"JS API 的加载\")), \"\\n\", React.createElement(_components.li, null, \"由于 Chrome、IOS10 等已不再支持非安全域的浏览器定位请求，为保证定位成功率和精度，请尽快升级您的站点到 HTTPS。——\", React.createElement(_components.a, {\n    href: \"https://developer.amap.com/api/javascript-api/reference/location\"\n  }, \"AMap.Geolocation 插件\")), \"\\n\"), \"\\n\", React.createElement(_components.h2, null, \"高德地图定位功能实现\"), \"\\n\", React.createElement(_components.p, null, \"现在已经引入了需要的库及插件 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">AMap.Geolocation</code>\"\n    }\n  }), \"，首先要构建一个浏览器定位实例 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">geolocation</code>\"\n    }\n  }), \"：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// 仅进行定位，不与地图交互</span>\\n<span class=\\\"token keyword\\\">const</span> geolocation <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">AMap<span class=\\\"token punctuation\\\">.</span>Geolocation</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token literal-property property\\\">timeout</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">10000</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 超过 10 秒后停止定位</span>\\n  <span class=\\\"token literal-property property\\\">noIpLocate</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 禁止移动端使用 IP 定位</span>\\n  <span class=\\\"token literal-property property\\\">useNative</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 使用安卓定位 sdk 用来进行定位</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"更多的构造选项可参考 \", React.createElement(_components.a, {\n    href: \"https://developer.amap.com/api/javascript-api/reference/location\"\n  }, \"AMap.Geolocation 插件官方文档\"), \"。\"), \"\\n\", React.createElement(_components.p, null, \"对于定位方法 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">getCurrentPosition(callback:function(status,result){})</code>\"\n    }\n  }), \"，可以用 callback 的方式或事件监听的方式实现取得返回值。以 callback 的方式为例，可编写：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\">geolocation<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">status<span class=\\\"token punctuation\\\">,</span> result</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>status <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"complete\\\"</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// 定位成功</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>result<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// 定位失败</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>result<span class=\\\"token punctuation\\\">.</span>message<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"为了封装函数，无法在回调函数里添加 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">return</code>\"\n    }\n  }), \" 进行返回，因此选择使用 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">Promise</code>\"\n    }\n  }), \" 的方法：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Promise</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">resolve<span class=\\\"token punctuation\\\">,</span> reject</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    geolocation<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">status<span class=\\\"token punctuation\\\">,</span> positionResult</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>status <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"complete\\\"</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位成功</span>\\n        <span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token literal-property property\\\">status</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token literal-property property\\\">msg</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"获取地理位置成功\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token literal-property property\\\">result</span><span class=\\\"token operator\\\">:</span> positionResult<span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位失败</span>\\n        <span class=\\\"token function\\\">reject</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Error</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">获取地理位置失败：</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>positionResult<span class=\\\"token punctuation\\\">.</span>message<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"接下来只需要进行标准的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">then()</code>\"\n    }\n  }), \" 或 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">catch()</code>\"\n    }\n  }), \" 处理就可以了：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">then</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">res</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">catch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">err</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"高德地图逆地理编码功能实现\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.a, {\n    href: \"https://developer.amap.com/api/javascript-api/reference/lnglat-to-address\"\n  }, \"高德地图逆地理编码\"), \"由 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">AMap.Geocoder</code>\"\n    }\n  }), \" 插件实现，我们也已经引入。\"), \"\\n\", React.createElement(_components.p, null, \"因此只需要将上一步得到的地理经纬度坐标信息作为参数传入即可：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">getCurrentAddress</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Promise</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">resolve<span class=\\\"token punctuation\\\">,</span> reject</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// 调用定位方法</span>\\n    <span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n      <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">then</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">positionResult</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位成功</span>\\n        <span class=\\\"token comment\\\">// 获得经纬度坐标数组，元素顺序不可变</span>\\n        <span class=\\\"token keyword\\\">const</span> lnglat <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n          positionResult<span class=\\\"token punctuation\\\">.</span>result<span class=\\\"token punctuation\\\">.</span>position<span class=\\\"token punctuation\\\">.</span>lng<span class=\\\"token punctuation\\\">,</span>\\n          positionResult<span class=\\\"token punctuation\\\">.</span>result<span class=\\\"token punctuation\\\">.</span>position<span class=\\\"token punctuation\\\">.</span>lat<span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// 构造地理编码或逆地理编码功能实例</span>\\n        <span class=\\\"token keyword\\\">const</span> geocoder <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">AMap<span class=\\\"token punctuation\\\">.</span>Geocoder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">// 获得逆编码信息</span>\\n        geocoder<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getAddress</span><span class=\\\"token punctuation\\\">(</span>lnglat<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">addressStatus<span class=\\\"token punctuation\\\">,</span> addressResult</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>addressStatus <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"complete\\\"</span> <span class=\\\"token operator\\\">&amp;&amp;</span> addressResult<span class=\\\"token punctuation\\\">.</span>regeocode<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token comment\\\">// 获取成功</span>\\n            <span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n              <span class=\\\"token literal-property property\\\">status</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">msg</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"获取地理位置和地区信息成功\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">result</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token literal-property property\\\">positionResult</span><span class=\\\"token operator\\\">:</span> positionResult<span class=\\\"token punctuation\\\">.</span>result<span class=\\\"token punctuation\\\">,</span> addressResult <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token comment\\\">// 获取失败</span>\\n            <span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n              <span class=\\\"token literal-property property\\\">status</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">msg</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"获取地理位置成功，但获取地区信息失败\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">result</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token literal-property property\\\">positionResult</span><span class=\\\"token operator\\\">:</span> positionResult<span class=\\\"token punctuation\\\">.</span>result <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n      <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">catch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">err</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位失败</span>\\n        <span class=\\\"token function\\\">reject</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"调用方式同上所述，不再赘述。可以添加对 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">status</code>\"\n    }\n  }), \" 的判断验证结果并进行相应处理。\"), \"\\n\", React.createElement(_components.h2, null, \"完整源码\"), \"\\n\", React.createElement(_components.p, null, \"编写封装的基于 Nuxt.js + Promise 实现高德地图定位及逆地理编码的代码如下所示：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// plugins/amapGeolocation.js</span>\\n<span class=\\\"token keyword\\\">import</span> Vue <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"vue\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> geolocation <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">AMap<span class=\\\"token punctuation\\\">.</span>Geolocation</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token literal-property property\\\">timeout</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">10000</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 超过 10 秒后停止定位</span>\\n  <span class=\\\"token literal-property property\\\">noIpLocate</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 禁止移动端使用 IP 定位</span>\\n  <span class=\\\"token literal-property property\\\">useNative</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token comment\\\">// 使用安卓定位 sdk 用来进行定位</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">/**\\n * 获取当前的经纬度坐标\\n * https://developer.amap.com/api/javascript-api/reference/location\\n */</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Promise</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">resolve<span class=\\\"token punctuation\\\">,</span> reject</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    geolocation<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">status<span class=\\\"token punctuation\\\">,</span> positionResult</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>status <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"complete\\\"</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位成功</span>\\n        <span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token literal-property property\\\">status</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token literal-property property\\\">msg</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"获取地理位置成功\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n          <span class=\\\"token literal-property property\\\">result</span><span class=\\\"token operator\\\">:</span> positionResult<span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位失败</span>\\n        <span class=\\\"token function\\\">reject</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Error</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">获取地理位置失败：</span><span class=\\\"token interpolation\\\"><span class=\\\"token interpolation-punctuation punctuation\\\">${</span>positionResult<span class=\\\"token punctuation\\\">.</span>message<span class=\\\"token interpolation-punctuation punctuation\\\">}</span></span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token comment\\\">/**\\n * 获取当前地理坐标的逆编码结果\\n * https://developer.amap.com/api/javascript-api/reference/lnglat-to-address\\n */</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">getCurrentAddress</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Promise</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">resolve<span class=\\\"token punctuation\\\">,</span> reject</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n      <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">then</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">positionResult</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">const</span> lnglat <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span>\\n          positionResult<span class=\\\"token punctuation\\\">.</span>result<span class=\\\"token punctuation\\\">.</span>position<span class=\\\"token punctuation\\\">.</span>lng<span class=\\\"token punctuation\\\">,</span>\\n          positionResult<span class=\\\"token punctuation\\\">.</span>result<span class=\\\"token punctuation\\\">.</span>position<span class=\\\"token punctuation\\\">.</span>lat<span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">const</span> geocoder <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">AMap<span class=\\\"token punctuation\\\">.</span>Geocoder</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        geocoder<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getAddress</span><span class=\\\"token punctuation\\\">(</span>lnglat<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">addressStatus<span class=\\\"token punctuation\\\">,</span> addressResult</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>addressStatus <span class=\\\"token operator\\\">===</span> <span class=\\\"token string\\\">\\\"complete\\\"</span> <span class=\\\"token operator\\\">&amp;&amp;</span> addressResult<span class=\\\"token punctuation\\\">.</span>regeocode<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token comment\\\">// 逆编码成功</span>\\n            <span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n              <span class=\\\"token literal-property property\\\">status</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">msg</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"获取地理位置和地区信息成功\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">result</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token literal-property property\\\">positionResult</span><span class=\\\"token operator\\\">:</span> positionResult<span class=\\\"token punctuation\\\">.</span>result<span class=\\\"token punctuation\\\">,</span> addressResult <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">else</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token comment\\\">// 逆编码失败</span>\\n            <span class=\\\"token function\\\">resolve</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n              <span class=\\\"token literal-property property\\\">status</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">msg</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"获取地理位置成功，但获取地区信息失败\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n              <span class=\\\"token literal-property property\\\">result</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token literal-property property\\\">positionResult</span><span class=\\\"token operator\\\">:</span> positionResult<span class=\\\"token punctuation\\\">.</span>result <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n          <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n      <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">catch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">err</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// 定位失败</span>\\n        <span class=\\\"token function\\\">reject</span><span class=\\\"token punctuation\\\">(</span>err<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">const</span> amapGeolocation <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">install</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">Vue</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token class-name\\\">Vue</span><span class=\\\"token punctuation\\\">.</span>prototype<span class=\\\"token punctuation\\\">.</span>$Geolocation <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n      getCurrentPosition<span class=\\\"token punctuation\\\">,</span>\\n      getCurrentAddress<span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\nVue<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">use</span><span class=\\\"token punctuation\\\">(</span>amapGeolocation<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"将此文件作为插件引入 Nuxt.js 后，可以在 Vue 文件中通过如下代码轻松调用：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// .vue</span>\\n<span class=\\\"token comment\\\">// 仅获取地理坐标</span>\\n<span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>$Geolocation\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getCurrentPosition</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">then</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">res</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">catch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">error</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>error<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// 获取地理坐标及所在地址</span>\\n<span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>$Geolocation\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getCurrentAddress</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">then</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">res</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>res<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">catch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">error</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span>error<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"相关链接\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"\\n\", React.createElement(Link, {\n    to: \"/posts/tencent-map-api-get-current-location\"\n  }, React.createElement(_components.p, null, \"使用腾讯位置服务进行 Web 前端定位\")), \"\\n\"), \"\\n\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/homepage/homepage/blog/posts/amap-import-vue.mdx\";\nimport {Fancybox} from \"@fancyapps/ui\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport dayjs from \"dayjs\";\nimport {Link} from \"gatsby\";\nimport * as React from \"react\";\nimport Card from \"../components/card\";\nimport Category from \"../components/category\";\nimport SEO from \"../components/seo\";\nimport Tag from \"../components/tag\";\nconst FancyBoxImage = props => {\n  const {alt = \"The author is too lazy to give an alt\", src, ...restProps} = props;\n  return React.createElement(\"a\", {\n    href: src,\n    \"data-fancybox\": \"gallery\",\n    \"data-caption\": alt\n  }, React.createElement(\"img\", Object.assign({\n    src: src,\n    alt: alt\n  }, restProps)));\n};\nconst ALink = _ref => {\n  let {href = \"\", children} = _ref;\n  const isExternalHref = !(href !== null && href !== void 0 && href.startsWith(\"#\"));\n  const parsedHref = isExternalHref ? href : `#${encodeURIComponent(href.slice(1))}`;\n  return React.createElement(\"a\", {\n    href: parsedHref,\n    target: isExternalHref ? \"_blank\" : undefined,\n    rel: \"noreferrer\"\n  }, children);\n};\nconst components = {\n  a: ALink,\n  img: FancyBoxImage,\n  Card,\n  Link\n};\nconst PostTemplate = _ref2 => {\n  let {children, data} = _ref2;\n  const {mdx: {frontmatter: {title, date: dateString, updated: updatedDateString, categories, tags, timeliness}}} = data;\n  const articleRef = React.useRef(null);\n  const date = dayjs(dateString);\n  const updatedDate = updatedDateString ? dayjs(updatedDateString) : date;\n  const today = dayjs();\n  const diffDays = today.diff(updatedDate, \"days\");\n  React.useEffect(() => {\n    var _articleRef$current;\n    const optimizedImageLinks = (_articleRef$current = articleRef.current) === null || _articleRef$current === void 0 ? void 0 : _articleRef$current.querySelectorAll(\"a.gatsby-resp-image-link\");\n    optimizedImageLinks === null || optimizedImageLinks === void 0 ? void 0 : optimizedImageLinks.forEach(link => {\n      const image = link.children.item(1);\n      link.setAttribute(\"data-fancybox\", \"gallery\");\n      link.setAttribute(\"data-caption\", image.alt);\n    });\n    Fancybox.bind(\"[data-fancybox]\");\n    return () => Fancybox.unbind(\"[data-fancybox]\");\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"mx-auto flex max-w-xl flex-col gap-y-12\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col gap-4\"\n  }, (categories === null || categories === void 0 ? void 0 : categories.length) && React.createElement(Category, {\n    name: categories[0],\n    className: \"item-selectable\"\n  }), React.createElement(\"h1\", {\n    className: \"text-3xl font-bold\"\n  }, title), React.createElement(\"div\", {\n    className: \"item-secondary flex flex-col gap-2 lg:flex-row\"\n  }, dateString && React.createElement(\"span\", {\n    title: `首次发布于：${date.toString()}\\n最后更新于：${updatedDate.toString()}`\n  }, date.format(\"MM 月 DD 日 YYYY 年\")), (tags === null || tags === void 0 ? void 0 : tags.length) && React.createElement(\"div\", {\n    className: \"flex flex-1 flex-wrap gap-2 lg:before:content-['\\u2022']\"\n  }, tags.map(tag => React.createElement(Tag, {\n    key: tag,\n    name: tag,\n    className: \"item-secondary item-selectable\"\n  }))))), React.createElement(\"article\", {\n    ref: articleRef,\n    className: \"heti post-entry\"\n  }, timeliness !== false && diffDays > 365 && React.createElement(\"blockquote\", {\n    className: \"border-l-4 border-orange-400\"\n  }, \"\\u8FD9\\u662F\\u4E00\\u7BC7\", React.createElement(\"strong\", null, \"\\u6700\\u540E\\u66F4\\u65B0\\u4E8E \", diffDays, \" \\u5929\\u524D\"), \"\\u7684\\u535A\\u5BA2\\uFF0C\\u5185\\u5BB9\\u53EF\\u80FD\\u968F\\u7740\\u65F6\\u95F4\\u7684\\u63A8\\u79FB\\u800C\\u53D8\\u5F97\\u4E0D\\u518D\\u9002\\u7528\\uFF0C\\u5EFA\\u8BAE\\u60A8\\u4ED4\\u7EC6\\u8BC4\\u4F30\\u4FE1\\u606F\\u7684\\u6709\\u6548\\u6027\\u3002\"), React.createElement(MDXProvider, {\n    components: components\n  }, children)));\n};\nconst query = \"2697480803\";\nexport const Head = _ref3 => {\n  let {data} = _ref3;\n  return React.createElement(SEO, {\n    title: String(data.mdx.frontmatter.title)\n  });\n};\nPostTemplate\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","h2","span","ul","li","a","_provideComponents","components","Link","id","component","Error","_missingMdxReference","React","dangerouslySetInnerHTML","__html","href","to","wrapper","MDXLayout","_ref","children","isExternalHref","startsWith","parsedHref","encodeURIComponent","slice","target","undefined","rel","img","alt","src","restProps","Card","PostTemplate","_ref2","data","mdx","frontmatter","title","date","dateString","updated","updatedDateString","categories","tags","timeliness","articleRef","dayjs","updatedDate","diffDays","diff","_articleRef$current","optimizedImageLinks","current","querySelectorAll","forEach","link","image","item","setAttribute","Fancybox","bind","unbind","className","length","Category","name","toString","format","map","tag","Tag","key","ref","MDXProvider","Head","_ref3","SEO","String","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}