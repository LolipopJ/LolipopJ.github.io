{"version":3,"file":"component---src-templates-post-tsx-content-file-path-blog-posts-switch-travis-to-github-workflow-mdx-885bc8685cbfbe4af7bf.js","mappings":"yMAGA,SAASA,EAAkBC,GACzB,MAAMC,EAAcC,OAAOC,OAAO,CAChCC,EAAG,IACHC,GAAI,KACJC,KAAM,OACNC,EAAG,MACFC,EAAAA,EAAAA,KAAsBR,EAAMS,YAC/B,OAAOC,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMA,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,uIAAwI,KAAMM,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,6IAA8I,KAAMM,EAAAA,cAAoBT,EAAYI,GAAI,KAAM,qBAAsB,KAAMK,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,8BAA+BM,EAAAA,cAAoBT,EAAYK,KAAM,CACvlBK,wBAAyB,CACvBC,OAAQ,oDAER,qDAAsD,KAAMF,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,IAAKM,EAAAA,cAAoBT,EAAYM,EAAG,CAC/IM,KAAM,6DACL,iBAAkB,cAAeH,EAAAA,cAAoBT,EAAYK,KAAM,CACxEK,wBAAyB,CACvBC,OAAQ,oDAER,UAAW,KAAMF,EAAAA,cAAoBT,EAAYK,KAAM,CACzDK,wBAAyB,CACvBC,OAAQ,6wDAER,KAAMF,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,0CAA2CM,EAAAA,cAAoBT,EAAYK,KAAM,CAClIK,wBAAyB,CACvBC,OAAQ,iDAER,2BAA4BF,EAAAA,cAAoBT,EAAYK,KAAM,CACpEK,wBAAyB,CACvBC,OAAQ,sEAER,iBAAkBF,EAAAA,cAAoBT,EAAYK,KAAM,CAC1DK,wBAAyB,CACvBC,OAAQ,iDAER,qBAAsB,KAAMF,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,wCAAyCM,EAAAA,cAAoBT,EAAYK,KAAM,CACtJK,wBAAyB,CACvBC,OAAQ,0DAER,iCAAkCF,EAAAA,cAAoBT,EAAYK,KAAM,CAC1EK,wBAAyB,CACvBC,OAAQ,mDAER,YAAa,KAAMF,EAAAA,cAAoBT,EAAYK,KAAM,CAC3DK,wBAAyB,CACvBC,OAAQ,ilJAER,KAAMF,EAAAA,cAAoBT,EAAYI,GAAI,KAAM,qBAAsB,KAAMK,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,yFAA0FM,EAAAA,cAAoBT,EAAYK,KAAM,CACvPK,wBAAyB,CACvBC,OAAQ,mDAER,kDAAmD,KAAMF,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,+CAAgDM,EAAAA,cAAoBT,EAAYK,KAAM,CAC1LK,wBAAyB,CACvBC,OAAQ,mDAER,UAAWF,EAAAA,cAAoBT,EAAYK,KAAM,CACnDK,wBAAyB,CACvBC,OAAQ,uDAER,KAAM,KAAMF,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,wBAAyB,KAAMM,EAAAA,cAAoBT,EAAYK,KAAM,CAC5HK,wBAAyB,CACvBC,OAAQ,ixBAER,KAAMF,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,MAAOM,EAAAA,cAAoBT,EAAYK,KAAM,CAC9FK,wBAAyB,CACvBC,OAAQ,mFAER,aAAcF,EAAAA,cAAoBT,EAAYM,EAAG,CACnDM,KAAM,oCACL,yBAA0B,kBAAmBH,EAAAA,cAAoBT,EAAYM,EAAG,CACjFM,KAAM,sFACL,uBAAwB,kBAAmBH,EAAAA,cAAoBT,EAAYK,KAAM,CAClFK,wBAAyB,CACvBC,OAAQ,qDAER,KAAM,KAAMF,EAAAA,cAAoBT,EAAYI,GAAI,KAAM,QAAS,KAAMK,EAAAA,cAAoBT,EAAYG,EAAG,KAAM,0CAA2CM,EAAAA,cAAoBT,EAAYK,KAAM,CACjMK,wBAAyB,CACvBC,OAAQ,wDAER,WAAYF,EAAAA,cAAoBT,EAAYK,KAAM,CACpDK,wBAAyB,CACvBC,OAAQ,oDAER,wBAAyB,KAAMF,EAAAA,cAAoBT,EAAYK,KAAM,CACvEK,wBAAyB,CACvBC,OAAQ,0mEAGd,CAKA,MAJA,SAAoBZ,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC3B,MAAOc,QAASC,GAAab,OAAOC,OAAO,CAAC,GAAGK,EAAAA,EAAAA,KAAsBR,EAAMS,YAC3E,OAAOM,EAAYL,EAAAA,cAAoBK,EAAWf,EAAOU,EAAAA,cAAoBX,EAAmBC,IAAUD,EAAkBC,EAC9H,E,8ECnFA,MAqBMS,EAAa,CACjBF,EAXYS,IACZ,IAAI,KAACH,EAAO,GAAE,SAAEI,GAAYD,EAC5B,MAAME,IAAmBL,SAAoCA,EAAKM,WAAW,MACvEC,EAAaF,EAAiBL,EAAO,IAAIQ,mBAAmBR,EAAKS,MAAM,MAC7E,OAAOZ,EAAAA,cAAoB,IAAK,CAC9BG,KAAMO,EACNG,OAAQL,EAAiB,cAAWM,EACpCC,IAAK,cACJR,EAAS,EAIZS,IAvBoB1B,IACpB,MAAM,IAAC2B,EAAM,wCAAuC,IAAEC,KAAQC,GAAa7B,EAC3E,OAAOU,EAAAA,cAAoB,IAAK,CAC9BG,KAAMe,EACN,gBAAiB,UACjB,eAAgBD,GACfjB,EAAAA,cAAoB,MAAOR,OAAOC,OAAO,CAC1CyB,IAAKA,EACLD,IAAKA,GACJE,IAAY,EAefC,KAAI,IACJC,KAAIA,EAAAA,IAEAC,EAAeC,IACnB,IAAI,SAAChB,EAAQ,YAAEiB,GAAeD,EAC9B,MAAOE,aAAa,MAACC,EAAOC,KAAMC,EAAYC,QAASC,EAAiB,WAAEC,EAAU,KAAEC,EAAI,WAAEC,GAAa,IAAST,EAC5GU,EAAalC,EAAAA,OAAa,MAC1B2B,EAAOQ,IAAMP,GACbQ,EAAcN,EAAoBK,IAAML,GAAqBH,EAE7DU,EADQF,MACSG,KAAKF,EAAa,QAYzC,OAXApC,EAAAA,WAAgB,KACd,IAAIuC,EACJ,MAAMC,EAAqE,QAA9CD,EAAsBL,EAAWO,eAA6C,IAAxBF,OAAiC,EAASA,EAAoBG,iBAAiB,4BAOlK,OANAF,SAA0EA,EAAoBG,SAAQC,IACpG,MAAMC,EAAQD,EAAKrC,SAASuC,KAAK,GACjCF,EAAKG,aAAa,gBAAiB,WACnCH,EAAKG,aAAa,eAAgBF,EAAM5B,IAAI,IAE9C+B,EAAAA,GAASC,KAAK,mBACP,IAAMD,EAAAA,GAASE,OAAO,kBAAkB,GAC9C,IACIlD,EAAAA,cAAoB,MAAO,CAChCmD,UAAW,2CACVnD,EAAAA,cAAoB,MAAO,CAC5BmD,UAAW,wBACTpB,aAA+C,EAASA,EAAWqB,SAAWpD,EAAAA,cAAoBqD,EAAAA,EAAU,CAC9GC,KAAMvB,EAAW,GACjBoB,UAAW,oBACTnD,EAAAA,cAAoB,KAAM,CAC5BmD,UAAW,sBACVzB,GAAQ1B,EAAAA,cAAoB,MAAO,CACpCmD,UAAW,6BACVvB,GAAc5B,EAAAA,cAAoB,OAAQ,CAC3C0B,MAAO,SAASC,EAAK4B,qBAAqBnB,EAAYmB,cACrD5B,EAAK6B,OAAO,sBAAuBxB,aAAmC,EAASA,EAAKoB,SAAWpD,EAAAA,cAAoB,MAAO,CAC3HmD,UAAW,oDACVnB,EAAKyB,KAAIC,GAAO1D,EAAAA,cAAoB2D,EAAAA,EAAK,CAC1CC,IAAKF,EACLJ,KAAMI,EACNP,UAAW,wCACLnD,EAAAA,cAAoB,UAAW,CACrC6D,IAAK3B,EACLiB,UAAW,mBACVlB,GAAcI,EAAW,KAAOrC,EAAAA,cAAoB,aAAc,CACnEmD,UAAW,gCACV,OAA4BnD,EAAAA,cAAoB,SAAU,KAAM,SAAmCqC,EAAU,OAAkB,yCAAmOrC,EAAAA,cAAoB8D,EAAAA,EAAa,CACpY/D,WAAYA,GACXQ,IAAW,EAEHwD,EAAOC,IAClB,IAAI,YAACxC,GAAewC,EACpB,OAAOhE,EAAAA,cAAoBiE,EAAAA,EAAK,CAC9BvC,MAAOF,EAAYC,YAAYC,OAC/B,EAGW,SAASwC,EAAiB5E,GACvC,OAAOU,EAAAA,cAAoBsB,EAAchC,EAAOU,EAAAA,cAAoBmE,EAAqB7E,GAC3F,C","sources":["webpack://homepage/./blog/posts/switch-travis-to-github-workflow.mdx","webpack://homepage/./src/templates/post.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    span: \"span\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"我真傻，真的，单单受文档的推荐就选择了 Travis 作为部分项目的持续集成工具，没有料到它早已于 2020 年 12 月更换了免费政策，不再为开源项目提供免费的用于持续集成使用的 Credits 了。当赠送的 10000 个点数用完，就需要付费才能进行构建了。\"), \"\\n\", React.createElement(_components.p, null, \"当然，作为经济驱动的公司，近些天来又受 Github Actions 等其它持续集成工具打压了盈利空间，抛弃开源用户选择转型做起了商人事业也并非不可理解。感谢它曾为开发者提供的便利，不过作为一个佛系开发者，终于还是需要转投到别的免费工具上去了——Gihub Actions。\"), \"\\n\", React.createElement(_components.h2, null, \"编写新的 workflow.yml\"), \"\\n\", React.createElement(_components.p, null, \"那么首先，我们就需要将为 Travis 编写的命名为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.travis.yml</code>\"\n    }\n  }), \" 的配置文件，翻译成 Github Actions 能识别的 workflow.yml 配置文件。\"), \"\\n\", React.createElement(_components.p, null, \"以\", React.createElement(_components.a, {\n    href: \"https://github.com/LolipopJ/design-patterns-for-humans-zh\"\n  }, \"献给中文读者的设计模式教程\"), \"这个项目为例，原有的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.travis.yml</code>\"\n    }\n  }), \" 内容如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"yml\\\"><pre class=\\\"language-yml\\\"><code class=\\\"language-yml\\\"><span class=\\\"token key atrule\\\">language</span><span class=\\\"token punctuation\\\">:</span> node_js\\n<span class=\\\"token key atrule\\\">node_js</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token punctuation\\\">-</span> lts/*\\n<span class=\\\"token key atrule\\\">branches</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">only</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token punctuation\\\">-</span> main\\n<span class=\\\"token key atrule\\\">install</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token punctuation\\\">-</span> cd vuepress\\n  <span class=\\\"token punctuation\\\">-</span> yarn install\\n<span class=\\\"token key atrule\\\">script</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token punctuation\\\">-</span> yarn build\\n<span class=\\\"token key atrule\\\">deploy</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">provider</span><span class=\\\"token punctuation\\\">:</span> pages\\n  <span class=\\\"token key atrule\\\">skip_cleanup</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean important\\\">true</span>\\n  <span class=\\\"token key atrule\\\">local_dir</span><span class=\\\"token punctuation\\\">:</span> vuepress/docs/.vuepress/dist\\n  <span class=\\\"token key atrule\\\">github_token</span><span class=\\\"token punctuation\\\">:</span> $CI_DEPLOY_TOKEN\\n  <span class=\\\"token key atrule\\\">keep_history</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean important\\\">true</span>\\n  <span class=\\\"token key atrule\\\">on</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">branch</span><span class=\\\"token punctuation\\\">:</span> main</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"当检测到 main 分支代码更新后，启动持续集成工具。克隆项目，进入到项目的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">vuepress</code>\"\n    }\n  }), \" 目录下执行安装依赖和生成静态文件操作，最后将 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">/vuepress/docs/.vuepress/dist</code>\"\n    }\n  }), \" 目录下的静态文件，上传到 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">gh-pages</code>\"\n    }\n  }), \" 分支，交给 Github 部署。\"), \"\\n\", React.createElement(_components.p, null, \"使用 Github Actions 实现上面的过程，首先在项目根目录创建 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.github/workflows</code>\"\n    }\n  }), \" 文件夹，在文件夹内创建 workflow 配置文件，例如 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">deploy.yml</code>\"\n    }\n  }), \"，编写内容如下：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"yml\\\"><pre class=\\\"language-yml\\\"><code class=\\\"language-yml\\\"><span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Vuepress Deployment\\n\\n<span class=\\\"token key atrule\\\">on</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">push</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">branches</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token punctuation\\\">-</span> main\\n\\n<span class=\\\"token key atrule\\\">jobs</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">pages</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">runs-on</span><span class=\\\"token punctuation\\\">:</span> ubuntu<span class=\\\"token punctuation\\\">-</span>latest\\n    <span class=\\\"token key atrule\\\">steps</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> actions/checkout@v2\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Use Node.js 14.x\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> actions/setup<span class=\\\"token punctuation\\\">-</span>node@v1\\n        <span class=\\\"token key atrule\\\">with</span><span class=\\\"token punctuation\\\">:</span>\\n          <span class=\\\"token key atrule\\\">node-version</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"14.x\\\"</span>\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Cache NPM dependencies\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> actions/cache@v2\\n        <span class=\\\"token key atrule\\\">with</span><span class=\\\"token punctuation\\\">:</span>\\n          <span class=\\\"token key atrule\\\">path</span><span class=\\\"token punctuation\\\">:</span> node_modules\\n          <span class=\\\"token key atrule\\\">key</span><span class=\\\"token punctuation\\\">:</span> $<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> runner.OS <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">-</span>npm<span class=\\\"token punctuation\\\">-</span>cache\\n          <span class=\\\"token key atrule\\\">restore-keys</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">|</span><span class=\\\"token scalar string\\\">\\n            ${{ runner.OS }}-npm-cache</span>\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Install Dependencies\\n        <span class=\\\"token key atrule\\\">run</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">|</span><span class=\\\"token scalar string\\\">\\n          cd vuepress\\n          npm install</span>\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Build\\n        <span class=\\\"token key atrule\\\">run</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">|</span><span class=\\\"token scalar string\\\">\\n          cd vuepress\\n          npm run build</span>\\n      <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> Deploy\\n        <span class=\\\"token key atrule\\\">uses</span><span class=\\\"token punctuation\\\">:</span> peaceiris/actions<span class=\\\"token punctuation\\\">-</span>gh<span class=\\\"token punctuation\\\">-</span>pages@v3\\n        <span class=\\\"token key atrule\\\">with</span><span class=\\\"token punctuation\\\">:</span>\\n          <span class=\\\"token key atrule\\\">github_token</span><span class=\\\"token punctuation\\\">:</span> $<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> secrets.GITHUB_TOKEN <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span>\\n          <span class=\\\"token key atrule\\\">deploy_key</span><span class=\\\"token punctuation\\\">:</span> $<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">{</span> secrets.ACCESS_TOKEN <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">}</span>\\n          <span class=\\\"token key atrule\\\">publish_dir</span><span class=\\\"token punctuation\\\">:</span> vuepress/docs/.vuepress/dist\\n          <span class=\\\"token key atrule\\\">publish_branch</span><span class=\\\"token punctuation\\\">:</span> gh<span class=\\\"token punctuation\\\">-</span>pages</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, null, \"创建 SSH Deploy Key\"), \"\\n\", React.createElement(_components.p, null, \"这一步是为了给 Github Actions 远程服务器访问我的 Github 账号提供凭证。如果没有设置 Github 账户双重验证或其它安全验证，可以移除上面脚本中的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">deploy_key</code>\"\n    }\n  }), \" 属性然后跳过这一步。但是假如以后设置了安全验证，回来改又会很麻烦，不如一步到位了吧 🤗。\"), \"\\n\", React.createElement(_components.p, null, \"您也可以生成 Personal access token 作为替代，不过前面的脚本中的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">deploy_key</code>\"\n    }\n  }), \" 应该修改为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">personal_token</code>\"\n    }\n  }), \"。\"), \"\\n\", React.createElement(_components.p, null, \"启动命令行工具，创建 SSH 部署密钥：\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"bash\\\"><pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token comment\\\"># 进入到当前用户的 .ssh 目录下</span>\\n<span class=\\\"token builtin class-name\\\">cd</span> ~/.ssh\\n<span class=\\\"token comment\\\"># 创建 SSH 密钥</span>\\nssh-keygen <span class=\\\"token parameter variable\\\">-t</span> rsa <span class=\\\"token parameter variable\\\">-b</span> <span class=\\\"token number\\\">4096</span> <span class=\\\"token parameter variable\\\">-C</span> <span class=\\\"token string\\\">\\\"<span class=\\\"token variable\\\"><span class=\\\"token variable\\\">$(</span><span class=\\\"token function\\\">git</span> config user.email<span class=\\\"token variable\\\">)</span></span>\\\"</span> <span class=\\\"token parameter variable\\\">-f</span> design-patterns-for-humans-zh-gh-pages</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"其中，\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">design-patterns-for-humans-zh-gh-pages.pub</code>\"\n    }\n  }), \" 为公钥，应上传到 \", React.createElement(_components.a, {\n    href: \"https://github.com/settings/keys\"\n  }, \"Github 账户 SSH keys 设置\"), \"中；不带后缀的为私钥，应作为 \", React.createElement(_components.a, {\n    href: \"https://github.com/LolipopJ/design-patterns-for-humans-zh/settings/secrets/actions\"\n  }, \"Github 项目仓库的 Secret\"), \"，根据前面的配置，这里命名为 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">ACCESS_TOKEN</code>\"\n    }\n  }), \"。\"), \"\\n\", React.createElement(_components.h2, null, \"最后一步\"), \"\\n\", React.createElement(_components.p, null, \"最后，移除 Github 仓库中用于 Travis 的删除原有部署密钥，例如 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">CI_DEPLOY_TOKEN</code>\"\n    }\n  }), \"，删除项目中的 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">.travis.yml</code>\"\n    }\n  }), \" 文件，提交代码到 Github 即可。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 624px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/011718c56e8455246852c7dac3517bfa/a88f6/deploy-finished.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 46.794871794871796%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABpUlEQVR42n2RX0/TYBSH+0UUAttY2/Xf2q5lbAPmNBqN38wP4IV8BeOFMUHnxkaIl94YvTAMo1FCFiGQrTBwj+dtnVkUbfKkOW9On/7OebWj5Ijj4SHJ6ASmE5JkTLe3y8t2h1evFd1/0u7s0Nnpy7vH8xfbdLp9tN77M7bfDmm/O+HNwRXP9gY4YY286bFUtFnMlwSThV9ktZAzyekuRStkpeSzWLCoN++ibfW/s9U/5nF3yJPdUx49/YC/ukFUa1KOGphuhOlFlLyYUjnGcCq/0Z0Q3Q6lp5LKW/ceosEViun0EvV8O/wqf/Wx/CpBdYNy3MCr1LCDKra/KqJMkhGktWIhZ7B+SxKejScoTkcXnIvz4+BL2uCKJG608ON1XFmBkqkkiplkJlRny7Kezdv30cbnExSj5ILLHzD49Dlt8Cp1PJEVZD95w6MgO1XJV4Sc7qSCGaq+sVSkoRL+LcwSWmGdoNbCjTdl/DU5C1LpTDBP3nC5uaxnI1+XUI1nyQWUo3qKYWcy9eGfsnnhtSPvi1BJ3HANRy5CpZ0f7X/C5p0H/ASsZ5PHuhEOnwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"CI 部署成功\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/011718c56e8455246852c7dac3517bfa/39c09/deploy-finished.png\\\"\\n        srcset=\\\"/static/011718c56e8455246852c7dac3517bfa/680fe/deploy-finished.png 156w,\\n/static/011718c56e8455246852c7dac3517bfa/17474/deploy-finished.png 312w,\\n/static/011718c56e8455246852c7dac3517bfa/39c09/deploy-finished.png 624w,\\n/static/011718c56e8455246852c7dac3517bfa/6d2da/deploy-finished.png 936w,\\n/static/011718c56e8455246852c7dac3517bfa/5a791/deploy-finished.png 1248w,\\n/static/011718c56e8455246852c7dac3517bfa/a88f6/deploy-finished.png 1900w\\\"\\n        sizes=\\\"(max-width: 624px) 100vw, 624px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/homepage/homepage/blog/posts/switch-travis-to-github-workflow.mdx\";\nimport {Fancybox} from \"@fancyapps/ui\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport dayjs from \"dayjs\";\nimport {Link} from \"gatsby\";\nimport * as React from \"react\";\nimport Card from \"../components/card\";\nimport Category from \"../components/category\";\nimport SEO from \"../components/seo\";\nimport Tag from \"../components/tag\";\nconst FancyBoxImage = props => {\n  const {alt = \"The author is too lazy to give an alt\", src, ...restProps} = props;\n  return React.createElement(\"a\", {\n    href: src,\n    \"data-fancybox\": \"gallery\",\n    \"data-caption\": alt\n  }, React.createElement(\"img\", Object.assign({\n    src: src,\n    alt: alt\n  }, restProps)));\n};\nconst ALink = _ref => {\n  let {href = \"\", children} = _ref;\n  const isExternalHref = !(href !== null && href !== void 0 && href.startsWith(\"#\"));\n  const parsedHref = isExternalHref ? href : `#${encodeURIComponent(href.slice(1))}`;\n  return React.createElement(\"a\", {\n    href: parsedHref,\n    target: isExternalHref ? \"_blank\" : undefined,\n    rel: \"noreferrer\"\n  }, children);\n};\nconst components = {\n  a: ALink,\n  img: FancyBoxImage,\n  Card,\n  Link\n};\nconst PostTemplate = _ref2 => {\n  let {children, pageContext} = _ref2;\n  const {frontmatter: {title, date: dateString, updated: updatedDateString, categories, tags, timeliness = true}} = pageContext;\n  const articleRef = React.useRef(null);\n  const date = dayjs(dateString);\n  const updatedDate = updatedDateString ? dayjs(updatedDateString) : date;\n  const today = dayjs();\n  const diffDays = today.diff(updatedDate, \"days\");\n  React.useEffect(() => {\n    var _articleRef$current;\n    const optimizedImageLinks = (_articleRef$current = articleRef.current) === null || _articleRef$current === void 0 ? void 0 : _articleRef$current.querySelectorAll(\"a.gatsby-resp-image-link\");\n    optimizedImageLinks === null || optimizedImageLinks === void 0 ? void 0 : optimizedImageLinks.forEach(link => {\n      const image = link.children.item(1);\n      link.setAttribute(\"data-fancybox\", \"gallery\");\n      link.setAttribute(\"data-caption\", image.alt);\n    });\n    Fancybox.bind(\"[data-fancybox]\");\n    return () => Fancybox.unbind(\"[data-fancybox]\");\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"mx-auto flex max-w-xl flex-col gap-y-12\"\n  }, React.createElement(\"div\", {\n    className: \"flex flex-col gap-4\"\n  }, (categories === null || categories === void 0 ? void 0 : categories.length) && React.createElement(Category, {\n    name: categories[0],\n    className: \"item-selectable\"\n  }), React.createElement(\"h1\", {\n    className: \"text-3xl font-bold\"\n  }, title), React.createElement(\"div\", {\n    className: \"item-secondary flex gap-2\"\n  }, dateString && React.createElement(\"span\", {\n    title: `首次发布于：${date.toString()}\\n最后更新于：${updatedDate.toString()}`\n  }, date.format(\"MM 月 DD 日 YYYY 年\")), (tags === null || tags === void 0 ? void 0 : tags.length) && React.createElement(\"div\", {\n    className: \"flex flex-1 flex-wrap gap-2 before:content-['\\u2022']\"\n  }, tags.map(tag => React.createElement(Tag, {\n    key: tag,\n    name: tag,\n    className: \"item-secondary item-selectable\"\n  }))))), React.createElement(\"article\", {\n    ref: articleRef,\n    className: \"heti post-entry\"\n  }, timeliness && diffDays > 365 && React.createElement(\"blockquote\", {\n    className: \"border-l-4 border-orange-400\"\n  }, \"\\u8FD9\\u662F\\u4E00\\u7BC7\", React.createElement(\"strong\", null, \"\\u6700\\u540E\\u66F4\\u65B0\\u4E8E \", diffDays, \" \\u5929\\u524D\"), \"\\u7684\\u535A\\u5BA2\\uFF0C\\u5185\\u5BB9\\u53EF\\u80FD\\u968F\\u7740\\u65F6\\u95F4\\u7684\\u63A8\\u79FB\\u800C\\u53D8\\u5F97\\u4E0D\\u518D\\u9002\\u7528\\uFF0C\\u5EFA\\u8BAE\\u60A8\\u4ED4\\u7EC6\\u8BC4\\u4F30\\u4FE1\\u606F\\u7684\\u6709\\u6548\\u6027\\u3002\"), React.createElement(MDXProvider, {\n    components: components\n  }, children)));\n};\nexport const Head = _ref3 => {\n  let {pageContext} = _ref3;\n  return React.createElement(SEO, {\n    title: pageContext.frontmatter.title\n  });\n};\nPostTemplate\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","h2","span","a","_provideComponents","components","React","dangerouslySetInnerHTML","__html","href","wrapper","MDXLayout","_ref","children","isExternalHref","startsWith","parsedHref","encodeURIComponent","slice","target","undefined","rel","img","alt","src","restProps","Card","Link","PostTemplate","_ref2","pageContext","frontmatter","title","date","dateString","updated","updatedDateString","categories","tags","timeliness","articleRef","dayjs","updatedDate","diffDays","diff","_articleRef$current","optimizedImageLinks","current","querySelectorAll","forEach","link","image","item","setAttribute","Fancybox","bind","unbind","className","length","Category","name","toString","format","map","tag","Tag","key","ref","MDXProvider","Head","_ref3","SEO","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}